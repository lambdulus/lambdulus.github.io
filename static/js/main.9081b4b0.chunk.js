(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e){e.exports=[{name:"applicative-order",type:"con",predicates:["should-do-beta","same-or-equivalent-until-beta-redex","beta-redex-left-side-same-or-equivalent","beta-redex-right-side-beta-reduced"]},{name:"argument-unremoved",type:"con",predicates:["should-do-beta","not-same-as-old","argument-substituted-but-unremoved"]},{name:"ignored-beta-reduction",type:"con",predicates:["should-do-beta","old-same-or-equivalent-to-user"]},{name:"wrong-argument-substituted",type:"con",predicates:["same-or-equivalent-until-beta-redex","beta-wrong-argument"]},{name:"double-step-alpha-beta",type:"dis",predicates:["should-do-alpha","correct-double-step-alpha-beta","incorrect-double-step-alpha-beta"]},{name:"macro-instead-of-expression",type:"con",predicates:["macro-expression-equivalent"]},{name:"typo",type:"con",predicates:["id-misstype"]},{name:"tried-beta-instead-of-alpha",type:"dis",predicates:["correct-beta-instead-of-alpha","incorrect-beta-instead-of-alpha"]},{name:"correct-beta-instead-of-alpha",type:"con",predicates:["should-do-alpha","redex-left-side-beta-reduced"]},{name:"incorrect-beta-instead-of-alpha",type:"con",predicates:["should-do-alpha","did-beta-incorrect"]},{name:"did-beta-incorrect",type:"dis",predicates:["applicative-order","argument-unremoved","wrong-argument-substituted"]}]},33:function(e,t,n){e.exports=n(73)},39:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(31),s=n.n(r),o=(n(39),n(14)),c=n(25),l=n(3),u=n(12),d=n(11),p=n(17),b=n(15),f=n(16),h=n(2),m=n(0),v={width:"100%",fontSize:"3em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none"};function g(e){var t=e.content,n=e.lines,a=e.onChange,r=e.caretPosition;return i.a.createElement("textarea",{style:v,onChange:a,value:t,placeholder:"(\u03bb f . (\u03bb x . f (x x)) (\u03bb x . f (x x)))",wrap:"hard",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,rows:Math.max(n+1,2),ref:function(e){null!==e&&(e.selectionStart=r,e.selectionEnd=r)}})}var x={fontSize:"1.5em",background:"none",borderStyle:"none",borderBottom:"2px solid navy",marginLeft:"5px",marginRight:"5px",cursor:"pointer",outline:"none"};function O(e){var t=e.run,n=e.stop,a=e.step,r=e.clear,s=e.validate,o=(e.stepIn,e.stepBack,e.canRun),c=e.canStepOver,l=(e.canStepIn,e.canGoBack,e.running);return i.a.createElement("div",null,i.a.createElement("button",{style:x,onClick:function(){return(l?n:t)()},disabled:!o},l?"STOP":"RUN"),i.a.createElement("button",{style:x,onClick:a,disabled:!c||l},"STEP"),i.a.createElement("button",{style:x,onClick:r,disabled:l},"CLEAR"),i.a.createElement("button",{style:x,onClick:s,disabled:!1},"VALIDATE"))}var y=function(e){function t(e,n,a){var i;return Object(u.a)(this,t),(i=Object(p.a)(this,Object(b.a)(t).call(this))).tree=e,i.onClick=n,i.redex=a,i.rendered=null,i.tree.visit(Object(h.a)(Object(h.a)(i))),i}return Object(f.a)(t,e),Object(d.a)(t,[{key:"printLambdaBody",value:function(e){e.body instanceof m.Lambda?this.printLambdaBody(e.body):e.body.visit(this)}},{key:"printLambdaArguments",value:function(e,t){var n=this;if(e.body instanceof m.Lambda){var a=i.a.createElement("span",{className:"arguments"},t," ",i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return n.onClick({type:m.Beta,context:e.body.argument})}},e.body.argument.name()));this.printLambdaArguments(e.body,a)}else this.rendered=t}}]),Object(d.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t={},n={};if(null!==this.redex&&this.redex.identifier===e.identifier&&(t={backgroundColor:"#69f0ae",borderRadius:"5px"},n={backgroundColor:"#ff80ab",borderRadius:"5px"}),e.right instanceof m.Application){e.left.visit(this);var a=i.a.createElement("span",{style:t},this.rendered);e.right.visit(this);var r=i.a.createElement("span",{style:n},"( ",this.rendered," )");this.rendered=i.a.createElement("span",{className:"application"},a," ",r)}else{e.left.visit(this);var s=i.a.createElement("span",{style:t},this.rendered);e.right.visit(this);var o=i.a.createElement("span",{style:n},this.rendered);this.rendered=i.a.createElement("span",{className:"application"},s," ",o)}}},{key:"onLambda",value:function(e){var t=this;if(e.body instanceof m.Lambda){var n=i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return t.onClick({type:m.Beta,context:e.body.argument})}},e.argument.name());this.printLambdaArguments(e,n);var a=this.rendered;this.printLambdaBody(e);var r=this.rendered;this.rendered=i.a.createElement("span",{className:"lambda"},"( ",i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){t.onClick({type:m.Beta,context:e})}},"\u03bb")," ",a," . ",r," )")}else{e.argument.visit(this);var s=this.rendered;e.body.visit(this);var o=this.rendered;this.rendered=i.a.createElement("span",{className:"lambda"},"(",i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){t.onClick({type:m.Beta,context:e})}},"\u03bb")," ",s," . ",o," )")}}},{key:"onChurchNumber",value:function(e){var t=this,n={};null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(n={backgroundColor:"#40c4ff",borderRadius:"5px"}),this.rendered=i.a.createElement("span",{className:"churchnumeral",style:Object(l.a)({cursor:"pointer"},n),onClick:function(){return t.onClick({type:m.Expansion,context:e})}},e.name())}},{key:"onMacro",value:function(e){var t=this,n={};null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(n={backgroundColor:"#40c4ff",borderRadius:"5px"}),this.rendered=i.a.createElement("span",{className:"macro",style:Object(l.a)({cursor:"pointer"},n),onClick:function(){return t.onClick({type:m.Expansion,context:e})}},e.name())}},{key:"onVariable",value:function(e){this.rendered=i.a.createElement("span",{className:"variable"},e.name())}}]),t}(m.ASTVisitor),E={fontSize:"2em",wordWrap:"anywhere"};function S(e){var t=e.tree,n=e.addBreakpoint;if(null===t)return null;var a=null,r=new m.NormalEvaluator(t);r.nextReduction instanceof m.Beta&&(a=r.nextReduction.redex),r.nextReduction instanceof m.Expansion&&(a=r.nextReduction.target);var s=new y(t,function(e){void 0!==n&&(console.log("CLICKED"),n(e))},a);return i.a.createElement("span",{style:E},s.print())}var j=n(18),C=n(32),k=n(29);function N(e,t){if(e instanceof m.Lambda&&t instanceof m.Lambda||e instanceof m.Application&&t instanceof m.Application){var n=N(e.left,t.left);return n?N(e.right,t.right):n}return(e instanceof m.Macro&&t instanceof m.Macro||e instanceof m.ChurchNumber&&t instanceof m.ChurchNumber||e instanceof m.Variable&&t instanceof m.Variable)&&e.name()===t.name()}function R(e,t,n){if(e instanceof m.Lambda&&t instanceof m.Lambda||e instanceof m.Application&&t instanceof m.Application){if(e.identifier===n)return!0;var a=R(e.left,t.left,n);return a?R(e.right,t.right,n):a}return(e instanceof m.Macro&&t instanceof m.Macro||e instanceof m.ChurchNumber&&t instanceof m.ChurchNumber||e instanceof m.Variable&&t instanceof m.Variable)&&(e.identifier===n||e.name()===t.name())}function w(e,t,n){return e instanceof m.Lambda&&t instanceof m.Lambda||e instanceof m.Application&&t instanceof m.Application?e.identifier===n?t:R(e.left,t.left,n)?w(e.right,t.right,n):null:e instanceof m.Macro&&t instanceof m.Macro||e instanceof m.ChurchNumber&&t instanceof m.ChurchNumber||e instanceof m.Variable&&t instanceof m.Variable?e.identifier===n?t:(e.name(),t.name(),null):null}function L(e){return e.identifier}function I(e){var t=new m.NormalEvaluator(e);return t.nextReduction instanceof m.Beta&&null!==t.nextReduction.parent&&null!==t.nextReduction.treeSide?t.nextReduction.parent[t.nextReduction.treeSide]:null}function B(e,t,n,a){switch(e){case"should-do-beta":return new m.NormalEvaluator(t).nextReduction instanceof m.Beta?{valid:!0}:{valid:!1,errors:["Next reduction should not be Beta."]};case"old-same-or-equivalent-to-user":return N(t,a)?{valid:!0}:{valid:!1,errors:["User's and old trees are not equivalent."]};case"same-or-equivalent-until-beta-redex":var i=I(t);return null===i?{valid:!1,errors:["I cannot find beta redex because next reduction is not beta"]}:R(n,a,L(i))?{valid:!0}:{valid:!1};case"beta-redex-left-side-same-or-equivalent":var r=I(t);if(null===r)return{valid:!0,errors:["I cannot find beta redex because next reduction is not beta"]};var s=w(n,a,L(r));return null===s?{valid:!1,errors:["I cannot find user redex equivalent."]}:N(r,s)?{valid:!0}:{valid:!1,errors:["Left side of redex is not same."]};case"not-same-as-old":return N(t,a)?{valid:!1,errors:["Old and user trees are same."]}:{valid:!0};case"beta-redex-right-side-beta-reduced":var o=I(t);if(null===o)return{valid:!1,errors:["I cannot find beta redex because next reduction is not beta"]};var c=w(n,a,L(o));return null===c?{valid:!1,errors:["I cannot find user redex equivalent."]}:N(function(e){return new m.ApplicativeEvaluator(e).perform()}(o),c)?{valid:!0}:{valid:!1,errors:["Right side of redex does not appear to be reduced correctly."]};case"argument-substituted-but-unremoved":var l=new m.NormalEvaluator(t);if(!(l.nextReduction instanceof m.Beta))return{valid:!1,errors:["I cannot find beta redex because next reduction is not beta"]};var u=new m.NormalEvaluator(a);if(!(u.nextReduction instanceof m.Beta))return{valid:!1,errors:["I cannot find beta redex because next reduction is not beta"]};var d=u.perform(),p=l.perform();return null===l.nextReduction.parent||null===l.nextReduction.treeSide?l.nextReduction.argName===u.nextReduction.argName&&N(p,d)?{valid:!0}:(console.log("FUCK"),{valid:!1,errors:["I cannot find beta redex because next reduction is not beta"]}):l.nextReduction.argName===u.nextReduction.argName&&N(p,d)?{valid:!0}:N(l.nextReduction.parent[l.nextReduction.treeSide],d)?{valid:!0}:(console.log("FUUUUUUCK"),{valid:!1,errors:["Does not appear to be case of unremoved but substituted arg."]});case"same-or-equivalent-from-beta-redex":var b=I(t);if(null===b)return{valid:!0,errors:["I cannot find beta redex because next reduction is not beta"]};var f=w(n,a,L(b));return null===f?{valid:!1,errors:["I cannot find user redex equivalent."]}:N(b.left,f.left)?N(b.right,f.right)?{valid:!0}:{valid:!1,errors:["Right child of beta redex is not same"]}:{valid:!1,errors:["Left child of beta redex is not same"]};case"beta-wrong-argument":return{valid:!1};case"correct-double-step-alpha-beta":var h=new m.NormalEvaluator(t);return h.nextReduction instanceof m.Alpha?(h=new m.NormalEvaluator(n)).nextReduction instanceof m.Beta?N(h.perform(),a)?{valid:!0}:{valid:!1,errors:["User tree does not correspond to double step Alpha+Beta."]}:{valid:!1,errors:["Second step was not Beta Reduction."]}:{valid:!1,errors:["First step was not Alpha Conversion."]};case"incorrect-double-step-alpha-beta":var v=new m.NormalEvaluator(t);return v.nextReduction instanceof m.Alpha?(v=new m.NormalEvaluator(n)).nextReduction instanceof m.Beta?N(v.perform(),a)?{valid:!0,errors:["This is valid double step Alpha+Beta"]}:{valid:!0}:{valid:!1,errors:["Second step was not Beta Reduction."]}:{valid:!1,errors:["First step was not Alpha Conversion."]};case"macro-expression-equivalent":case"id-misstype":return{valid:!1};case"should-do-alpha":return new m.NormalEvaluator(t).nextReduction instanceof m.Alpha?{valid:!0}:{valid:!1,errors:["First step was not Alpha Conversion."]};case"redex-left-side-beta-reduced":return{valid:!1};default:return console.log("I CANT FIGURE OUT THIS"),console.log(e),{valid:!1,errors:["I can't figure out what exactly you did wrong"]}}}var M=function(e,t){return!1===e.valid&&"con"===t.type};function T(e){return e.trim()}var F=function(){function e(t){Object(u.a)(this,e),this.roots=t,this.translator=new Map,this.equals=!0,this.context=void 0,this.answers=[];var n=t,a=Object(C.a)(n);a[0],this.context=a.slice(1),this.compare(),this.equals||(this.answers=function(e,t,n){var a=Object.fromEntries(Object(o.a)(k).map(function(e){return[e.name,[]]}));return function i(r){var s=!0,c=!1,l=void 0;try{e:for(var u,d=r[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value,b=p.name,f=p.predicates,h=!0,m=!1,v=void 0;try{for(var g,x=function(){var s=g.value;if(void 0!==r.find(function(e){var t=e.name;return s===t})&&!(s in a))return delete a[b],"continue|rules";if(s in a)return i([r.find(function(e){return e.name===s})]),s in a?(a[b]=[].concat(Object(o.a)(a[b]),Object(o.a)(a[s])),"continue"):M({valid:!1},p)?(delete a[b],"continue|rules"):"continue";var c=B(s,e.clone(),t.clone(),n.clone());return M(c,p)?(delete a[b],"continue|rules"):c.valid?void(a[b]=[c].concat(Object(o.a)(a[b]))):"continue"},O=f[Symbol.iterator]();!(h=(g=O.next()).done);h=!0)switch(x()){case"continue|rules":continue e;case"continue":continue}}catch(y){m=!0,v=y}finally{try{h||null==O.return||O.return()}finally{if(m)throw v}}}}catch(y){c=!0,l=y}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}(k),Object.fromEntries(Object.entries(a).filter(function(e){var t=Object(j.a)(e,2);return t[0],0!==t[1].length}))}.apply(void 0,Object(o.a)(t)))}return Object(d.a)(e,[{key:"compare",value:function(){var e=Object(j.a)(this.context,2),t=e[0],n=e[1];if(t instanceof m.Lambda&&n instanceof m.Lambda){var a=new Map(this.translator.entries());this.translator.set(t.argument.name(),n.argument.name()),this.context=[t.right,n.right],this.compare(),this.translator=a}else if(t instanceof m.Application&&n instanceof m.Application){if(this.context=[t.left,n.left],this.compare(),!this.equals)return;this.context=[t.right,n.right],this.compare()}else t instanceof m.Macro&&n instanceof m.Macro?this.equals=t.name()===n.name():t instanceof m.ChurchNumber&&n instanceof m.ChurchNumber?this.equals=t.name()===n.name():t instanceof m.Variable&&n instanceof m.Variable?this.equals=this.translator.get(t.name())===n.name():this.equals=!1}}]),e}(),A={padding:"0"},V={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingLeft:"10px",paddingRight:"10px",border:"1px solid gray",listStyle:"none",margin:"10px",borderRadius:"20px",color:"gray",cursor:"pointer"},U={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"10px",paddingRight:"10px",border:"2px solid black",listStyle:"none",margin:"10px",borderRadius:"20px",color:"black",cursor:"pointer"},q={width:"100%",fontSize:"2em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none",borderBottom:"none"},D=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).onChange=n.onChange.bind(Object(h.a)(Object(h.a)(n))),n.listMacros=n.listMacros.bind(Object(h.a)(Object(h.a)(n))),n.onAdd=n.onAdd.bind(Object(h.a)(Object(h.a)(n))),n.isValidExpression=n.isValidExpression.bind(Object(h.a)(Object(h.a)(n))),n.state={value:"",invalidMacro:!1,builtinsExpanded:!0,macroError:null},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("span",{title:"Click for toggle display",style:{fontSize:"1.3em",cursor:"pointer"},onClick:function(t){return e.setState(Object(l.a)({},e.state,{builtinsExpanded:!e.state.builtinsExpanded}))}},"Built-in Macros:"),i.a.createElement("ul",{style:A},this.state.builtinsExpanded?Object.entries(m.builtinMacros).map(function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return i.a.createElement("li",{title:"Built-in Macro",style:V,key:n},n," ",":= ",a)}):null),i.a.createElement("span",{style:{fontSize:"1.3em"}},"User defined Macros:"),this.listMacros(),i.a.createElement("br",null),i.a.createElement("form",{onSubmit:this.onAdd},i.a.createElement("input",{disabled:this.props.disabled,value:this.state.value,onChange:this.onChange,placeholder:"T := (\u03bb t f . t)",style:this.state.invalidMacro?Object(l.a)({},q,{borderBottom:"2px solid #EF3D59"}):q,autoFocus:!0,type:"text"})))}},{key:"onChange",value:function(e){var t=e.target.value;t=t.replace(/\\/g,"\u03bb"),this.setState(Object(l.a)({},this.state,{value:t,invalidMacro:!1}))}},{key:"onAdd",value:function(e){e.preventDefault();var t=this.state.value.split(":=").map(T),n=Object(j.a)(t,2),a=n[0],i=n[1];if(!i||!this.isValidExpression(i)||a in m.builtinMacros){var r=i?a in m.builtinMacros?"You can not redefine built-in macros.":"Invalid macro.":"Empty definition.";return this.setState(Object(l.a)({},this.state,{invalidMacro:!0,macroError:r})),void console.error(r)}this.props.addMacro(a,i),this.setState(Object(l.a)({},this.state,{value:""}))}},{key:"listMacros",value:function(){var e=this,t=this.props.macros;return i.a.createElement("ul",{style:A},Object.entries(t).map(function(t){var n=Object(j.a)(t,2),a=n[0],r=n[1];return i.a.createElement("li",{key:a,title:e.props.disabled?"You cannot remove Macro while evaluating":"Click to delete Macro",style:U,onClick:function(){return!e.props.disabled&&e.props.removeMacro(a)}},a," := ",r)}))}},{key:"isValidExpression",value:function(e){try{var t=Object(m.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:!1});return Object(m.parse)(t,this.props.macros),!0}catch(n){return!1}}}]),t}(a.Component),z={width:"100%",fontSize:"2em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none",borderBottom:"none"},Y=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).onChange=n.onChange.bind(Object(h.a)(Object(h.a)(n))),n.compare=n.compare.bind(Object(h.a)(Object(h.a)(n))),n.isValidExpression=n.isValidExpression.bind(Object(h.a)(Object(h.a)(n))),n.state={value:"",invalidExpr:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.compare},i.a.createElement("input",{value:this.state.value,onChange:this.onChange,placeholder:"(\u03bb t f . t)",style:this.state.invalidExpr?Object(l.a)({},z,{borderBottom:"2px solid #EF3D59"}):z,autoFocus:!0,type:"text"}))}},{key:"onChange",value:function(e){var t=e.target.value;t=t.replace(/\\/g,"\u03bb"),this.setState(Object(l.a)({},this.state,{value:t,invalidExpr:!1}))}},{key:"compare",value:function(e){e.preventDefault();var t=this.state.value.trim();t&&this.isValidExpression(t)?(this.props.onComparison(t),this.setState(Object(l.a)({},this.state,{value:""}))):this.setState(Object(l.a)({},this.state,{invalidExpr:!0}))}},{key:"isValidExpression",value:function(e){try{var t=Object(m.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:!1});return Object(m.parse)(t,{}),!0}catch(n){return!1}}}]),t}(a.Component),H={margin:"auto",marginTop:"5vh",width:"80%",borderBottom:"2px solid gray",padding:"10px"},P={margin:"auto",width:"80%",marginTop:"2vh"},_={position:"absolute",top:"0",width:"100%",borderBottom:"2px solid gray",backgroundColor:"white"},G={margin:"10px"},J={border:"none",background:"transparent",fontSize:"1.5em",cursor:"pointer"},K={padding:"0"},Q={listStyle:"none",marginBottom:"20px"},W=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).run=n.run.bind(Object(h.a)(Object(h.a)(n))),n.step=n.step.bind(Object(h.a)(Object(h.a)(n))),n.stepIn=n.stepIn.bind(Object(h.a)(Object(h.a)(n))),n.stepBack=n.stepBack.bind(Object(h.a)(Object(h.a)(n))),n.parseExpression=n.parseExpression.bind(Object(h.a)(Object(h.a)(n))),n.onExpressionChange=n.onExpressionChange.bind(Object(h.a)(Object(h.a)(n))),n.autoSave=function(e,t){var n;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];window.clearTimeout(n),n=window.setTimeout(function(){e.apply(void 0,i)},t)}}(n.autoSave.bind(Object(h.a)(Object(h.a)(n))),500),n.getExpressionFromURL=n.getExpressionFromURL.bind(Object(h.a)(Object(h.a)(n))),n.updateFromURL=n.updateFromURL.bind(Object(h.a)(Object(h.a)(n))),n.addMacro=n.addMacro.bind(Object(h.a)(Object(h.a)(n))),n.removeMacro=n.removeMacro.bind(Object(h.a)(Object(h.a)(n))),n.getMacrosFromLocalStorage=n.getMacrosFromLocalStorage.bind(Object(h.a)(Object(h.a)(n))),n.clear=n.clear.bind(Object(h.a)(Object(h.a)(n))),n.validate=n.validate.bind(Object(h.a)(Object(h.a)(n))),n.onComparison=n.onComparison.bind(Object(h.a)(Object(h.a)(n))),n.__run=n.__run.bind(Object(h.a)(Object(h.a)(n))),n.stop=n.stop.bind(Object(h.a)(Object(h.a)(n))),n.addBreakpoint=n.addBreakpoint.bind(Object(h.a)(Object(h.a)(n))),n.shouldBreak=n.shouldBreak.bind(Object(h.a)(Object(h.a)(n))),window.addEventListener("hashchange",n.updateFromURL);var a=n.getExpressionFromURL(),i=a.split("\n").length;return n.state={expression:a,lines:i,caretPosition:a.length,ast:null,steps:0,previousReduction:null,autoCloseParenthesis:!1,macroTable:n.getMacrosFromLocalStorage(),menuOpen:!1,steping:!1,briefHistory:[],isValidating:!1,running:!1,singleLetterVars:!1,breakpoints:[],comparison:[],userExpression:""},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(l.a)({},this.state,{ast:this.parseExpression(this.state.expression)}))}},{key:"render",value:function(){var e=this,t={run:this.run,stop:this.stop,step:this.step,clear:this.clear,validate:this.validate,stepIn:this.stepIn,stepBack:this.stepBack,canRun:!0,canStepOver:!0,canStepIn:!0,canGoBack:!0,running:this.state.running},n=this.state,a=(n.ast,n.steps),r=n.expression,s=n.lines,o=n.caretPosition;return i.a.createElement("div",{className:"App"},this.state.menuOpen?i.a.createElement("div",{style:_},i.a.createElement("button",{title:"Close Menu",style:J,onClick:function(){e.setState(Object(l.a)({},e.state,{menuOpen:!1}))}},")("),i.a.createElement("div",{style:G},i.a.createElement("span",{style:{fontSize:"1.3em"}},"Autocomplete parethesis"),i.a.createElement("input",{type:"checkbox",checked:this.state.autoCloseParenthesis,onChange:function(t){return e.setState(Object(l.a)({},e.state,{autoCloseParenthesis:!e.state.autoCloseParenthesis}))}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{style:{fontSize:"1.3em"},title:"Write identifiers without spaces"},"Single letter Identifiers"),i.a.createElement("input",{type:"checkbox",checked:this.state.singleLetterVars,onChange:function(t){return e.setState(Object(l.a)({},e.state,{singleLetterVars:!e.state.singleLetterVars}))}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(D,{disabled:this.state.steping,macros:this.state.macroTable,addMacro:this.addMacro,removeMacro:this.removeMacro}))):i.a.createElement("button",{title:"Open Menu",style:J,onClick:function(){e.setState(Object(l.a)({},e.state,{menuOpen:!0}))}},"()"),i.a.createElement("div",{style:H},i.a.createElement(g,{content:r,lines:s,caretPosition:o,onChange:this.onExpressionChange}),i.a.createElement("br",null),i.a.createElement(O,t),i.a.createElement("br",null),"Steps: ",a,i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{style:P},this.state.comparison.length?i.a.createElement("span",{style:{color:"red"}},"Your expression: ",i.a.createElement("span",{style:{color:"gray"}},this.state.userExpression)," is not valid.",i.a.createElement("ul",{style:K},this.state.comparison.map(function(e,t){return i.a.createElement("li",{style:Q,key:t},e)}))):null,this.state.isValidating?i.a.createElement(Y,{onComparison:this.onComparison}):null,i.a.createElement("ul",{style:K},this.state.briefHistory.map(function(t,n){return i.a.createElement("li",{key:n,style:0!==n?Object(l.a)({},Q,{color:"gray"}):Q},0===n?i.a.createElement(S,{addBreakpoint:e.addBreakpoint,tree:t}):i.a.createElement(S,{tree:t}))}))))}},{key:"shouldBreak",value:function(e,t){return t instanceof e.type&&t instanceof m.Beta&&e.context instanceof m.Lambda&&t.target.identifier===e.context.body.identifier||(t instanceof e.type&&t instanceof m.Beta&&e.context instanceof m.Variable&&t.redex.left instanceof m.Lambda&&t.redex.left.argument.identifier===e.context.identifier||(t instanceof e.type&&t instanceof m.Expansion&&e.context instanceof m.ChurchNumber&&t.target.identifier===e.context.identifier||t instanceof e.type&&t instanceof m.Expansion&&e.context instanceof m.Macro&&t.target.identifier===e.context.identifier))}},{key:"__run",value:function(){var e=this,t=this.state,n=t.ast,a=t.expression,i=t.steps,r=t.previousReduction,s=t.briefHistory,o=t.running,c=t.breakpoints;if(o&&(0===i&&(n=this.parseExpression(a)),!(null===n||r instanceof m.None))){var u=new m.NormalEvaluator(n);if(r=u.nextReduction,u.nextReduction instanceof m.None)return s=[n.clone()],void this.setState(Object(l.a)({},this.state,{ast:n,steps:i,previousReduction:r,steping:!1,briefHistory:s,isValidating:!1,running:!1}));var d=0;if(void 0!==c.find(function(t,n){return d=n,e.shouldBreak(t,u.nextReduction)}))return c.splice(d,1),void this.setState(Object(l.a)({},this.state,{running:!1,steping:!1,breakpoints:c}));n=u.perform(),i++,this.setState(Object(l.a)({},this.state,{ast:n,steps:i,previousReduction:r,briefHistory:[n.clone()],isValidating:!1})),window.setTimeout(this.__run,10)}}},{key:"run",value:function(){var e=this;this.state.previousReduction instanceof m.None||this.setState(Object(l.a)({},this.state,{running:!0,steping:!0,comparison:[],userExpression:""}),function(){return window.setTimeout(e.__run,5)})}},{key:"stop",value:function(){this.setState(Object(l.a)({},this.state,{running:!1}))}},{key:"step",value:function(){var e=this.state,t=e.ast,n=e.expression,a=e.steps,i=e.previousReduction,r=e.briefHistory;if(0===a&&(t=this.parseExpression(n)),!(null===t||i instanceof m.None)){var s=new m.NormalEvaluator(t);i=s.nextReduction,s.nextReduction instanceof m.None?this.setState(Object(l.a)({},this.state,{steping:!1,previousReduction:i,comparison:[],userExpression:""})):(t=s.perform(),a++,r.unshift(t.clone()),r.length=Math.min(r.length,5),this.setState(Object(l.a)({},this.state,{ast:t,steps:a,previousReduction:i,steping:!0,briefHistory:r,isValidating:!1,comparison:[],userExpression:""})))}}},{key:"clear",value:function(){this.setState({steps:0,previousReduction:null,briefHistory:[],steping:!1,isValidating:!1,breakpoints:[]})}},{key:"validate",value:function(){this.state.previousReduction instanceof m.None||this.setState(Object(l.a)({},this.state,{isValidating:!0,comparison:[],userExpression:""}))}},{key:"onComparison",value:function(e){var t=this.state,n=t.ast,a=t.expression,i=t.steps,r=t.previousReduction,s=t.briefHistory;if(0===i&&(n=this.parseExpression(a)),null===n||r instanceof m.None)this.setState(Object(l.a)({},this.state,{ast:n,isValidating:!1}));else{var o=n.clone(),c=new m.NormalEvaluator(n);if(r=c.nextReduction,c.nextReduction instanceof m.None)this.setState(Object(l.a)({},this.state,{steping:!1,isValidating:!1}));else{n=c.perform(),i++;var u=this.parseExpression(e);if(null===u)return console.error("User Input is INVALID \u03bb expression."),void this.setState(Object(l.a)({},this.state,{ast:n,isValidating:!1}));var d=new F([o.clone(),n.clone(),u.clone()]);if(d.equals)s.unshift(u.clone()),s.length=Math.min(s.length,5),this.setState(Object(l.a)({},this.state,{ast:u,steps:i,previousReduction:r,briefHistory:s,isValidating:!1,comparison:[],userExpression:e}));else{s.unshift(n.clone()),s.length=Math.min(s.length,5);var p=Object.keys(d.answers);0===p.length&&p.push("I don't know what went wrong."),this.setState(Object(l.a)({},this.state,{ast:n,steps:i,previousReduction:r,briefHistory:s,isValidating:!1,comparison:p,userExpression:e}))}}}}},{key:"stepIn",value:function(){}},{key:"stepBack",value:function(){}},{key:"onExpressionChange",value:function(e){var t=this.state.autoCloseParenthesis,n=e.target.value,a=n.split("\n").length,i=e.target.selectionEnd;n=n.replace(/\\/g,"\u03bb"),t&&"("===n.charAt(i-1)&&(n=n.slice(0,i)+")"+n.slice(i));var r=this.parseExpression(n);this.autoSave(n),this.setState({expression:n,lines:a,ast:r,briefHistory:[],steps:0,previousReduction:null,caretPosition:i,isValidating:!1,breakpoints:[]})}},{key:"autoSave",value:function(e){var t=encodeURI(e);window.location.hash=t}},{key:"parseExpression",value:function(e){var t=this.state.singleLetterVars;try{var n=Object(m.tokenize)(e,{lambdaLetters:["\u03bb","~"],singleLetterVars:t}),a=Object(m.parse)(n,this.state.macroTable);return console.log("successfuly parsed"),a}catch(i){return console.log("Something went wrong"),console.error(i),null}}},{key:"getExpressionFromURL",value:function(){return decodeURI(window.location.hash.substring(1))}},{key:"getMacrosFromLocalStorage",value:function(){var e=JSON.parse(window.localStorage.getItem("macrotable")||"{}");return Object(l.a)({},{fact:"(Y (\u03bb f n . (<= n 1) 1 (* n (f (- n 1)))))",facct:"(\u03bb n . (Y (\u03bb f n a . IF (= n 1) a (f (- n 1) (* n a)))) (- n 1) (n))",fib:"(Y (\u03bb f n . (= n 0) 0 ((= n 1) 1 ( + (f (- n 1)) (f (- n 2))))))",inflist:"(\u03bb n . (Y (\u03bb x . (\u03bb f s g . g f s) n x)))",SHORTLIST:"CON 3 (CONS 5 (CONS 1 NIL))",LONGLIST:"(CONS 3 (CONS 5 (CONS 1 (CONS 10 (CONS 7 (CONS 2 (CONS 4 (CONS 9 (CONS 4 (CONS 6 (CONS 8 NIL)))))))))))",LISTGREQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (>= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTLESS:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (< (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTGR:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (> (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTEQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",CONNECT:"Y (\u03bb fn listA listB . IF (NULL listA) (listB) (CONS (FIRST listA) (fn (SECOND listA) listB)))",QUICKSORT:"Y (\u03bb fn list . IF (NULL list) (NIL) ( IF (NULL (SECOND list)) (list) ( CONNECT (fn (LISTLESS (FIRST list) list)) ( CONNECT (LISTEQ (FIRST list) list) (fn (LISTGR (FIRST list) list)) ) ) ) )"},e)}},{key:"updateFromURL",value:function(){var e=this.state.expression,t=this.getExpressionFromURL(),n=t.split("\n").length;if(e!==t){var a=this.parseExpression(t);this.setState({expression:t,lines:n,ast:a,steps:0,previousReduction:null})}else console.log("ALREADY SYNCED")}},{key:"addMacro",value:function(e,t){var n=Object(l.a)({},this.state.macroTable,Object(c.a)({},e,t));this.setState(Object(l.a)({},this.state,{macroTable:n})),window.localStorage.setItem("macrotable",JSON.stringify(n))}},{key:"removeMacro",value:function(e){var t=Object(l.a)({},this.state.macroTable);delete t[e],this.setState(Object(l.a)({},this.state,{macroTable:t})),window.localStorage.setItem("macrotable",JSON.stringify(t))}},{key:"addBreakpoint",value:function(e){this.setState(Object(l.a)({},this.state,{breakpoints:[].concat(Object(o.a)(this.state.breakpoints),[e])}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.9081b4b0.chunk.js.map