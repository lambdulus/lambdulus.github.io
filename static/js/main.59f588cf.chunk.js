(this["webpackJsonp@lambdulus/holo"]=this["webpackJsonp@lambdulus/holo"]||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},243:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a,i,o,r,s,c,l=n(0),u=n.n(l),m=n(66),d=n.n(m),p=(n(74),n(17)),b=n(3),h=n(8),f=n(9),E=n(13),g=n(12),y=n(4),v=n(14),x=(n(75),n(6)),S=n(23);!function(e){e.UNTYPED_LAMBDA="UNTYPED_LAMBDA",e.LISP="LISP",e.MARKDOWN="MARKDOWN"}(a||(a={})),function(e){e[e.MAIN=0]="MAIN",e[e.HELP=1]="HELP",e[e.SETTINGS=2]="SETTINGS",e[e.NOTEBOOKS=3]="NOTEBOOKS"}(i||(i={})),function(e){e.LIGHT="LIGHT",e.DARK="DARK"}(o||(o={})),function(e){e.INIT="Type \u03bb (as \\) expression and hit enter",e.EVAL_MODE="Hit enter for next step",e.VALIDATE_MODE="Write next step and hit enter for validation",e.MACRO="Define Macro like: `NAME := [\u03bb expression]` and hit enter",e.NOTE="Type note and hit shift enter"}(r||(r={})),function(e){e.EMPTY="EMPTY",e.ORDINARY="ORDINARY",e.EXERCISE="EXERCISE"}(s||(s={})),function(e){e.NORMAL="Normal Evaluation",e.APPLICATIVE="Applicative Evaluation",e.OPTIMISATION="Optimisation - \u03b7 Conversion",e.ABSTRACTION="Abstraction / Simplified Evaluation"}(c||(c={}));var N=n(1),O=n(10),k=n(67),A=function(){function e(t){Object(h.a)(this,e),this.roots=t,this.translator=new Map,this.equals=!0,this.context=void 0;var n=t,a=Object(k.a)(n);this.context=a.slice(0),this.compare()}return Object(f.a)(e,[{key:"compare",value:function(){var e=Object(x.a)(this.context,2),t=e[0],n=e[1];if(t instanceof N.Lambda&&n instanceof N.Lambda){var a=new Map(this.translator.entries());this.translator.set(t.argument.name(),n.argument.name()),this.context=[t.right,n.right],this.compare(),this.translator=a}else if(t instanceof N.Application&&n instanceof N.Application){if(this.context=[t.left,n.left],this.compare(),!this.equals)return;this.context=[t.right,n.right],this.compare()}else t instanceof N.Macro&&n instanceof N.Macro||t instanceof N.ChurchNumeral&&n instanceof N.ChurchNumeral?this.equals=t.name()===n.name():t instanceof N.Variable&&n instanceof N.Variable?this.translator.has(t.name())?this.equals=this.translator.get(t.name())===n.name():this.equals=t.name()===n.name():this.equals=!1}}]),e}();function j(e,t,n){try{window.ga.getAll()[0].send("event",e,t,n)}catch(a){}}var L={macrotable:{}},R="UNTYPED_LAMBDA_CALCULUS",w={type:a.UNTYPED_LAMBDA,SLI:!0,expandStandalones:!1,strategy:c.NORMAL,SDE:!0};function B(e){return Object(b.a)({},e,{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:s.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(b.a)({},L.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})}function D(e,t){var n=e.reduce((function(e,t){var n=t.split(":="),a=Object(x.a)(n,2),i=a[0];a[1];return Object(b.a)({},e,Object(S.a)({},i,""))}),{});return e.reduce((function(e,a){var i=a.split(":="),o=Object(x.a)(i,2),r=o[0],s=o[1],c=Object(N.tokenize)(s.trim(),{lambdaLetters:["\u03bb"],singleLetterVars:t,macromap:n}),l=Object(N.parse)(c,n);return Object(b.a)({},e,Object(S.a)({},r.trim(),l.toString()))}),{})}function T(e,t,n){return n===s.EMPTY?Object(b.a)({},t,{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:n,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:{},editor:{placeholder:"placeholder",content:e,caretPosition:0,syntaxError:null}}):function(e,t,n){var i=t.SDE,o=t.SLI,s=t.strategy,c=e.split(";"),l=c.pop()||"",u=D(c,o);try{var m=Object(N.tokenize)(l,{lambdaLetters:["\u03bb"],singleLetterVars:o,macromap:u}),d=Object(N.parse)(m,u),p="",h=!1,f=d.clone();return(i?M(f,s,u)[0]:new(_(s))(f).nextReduction)instanceof N.None&&(h=!0,p="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",d.toString())),j("Submit Expression from Link","submit valid",e),Object(b.a)({},t,{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:n,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,ast:d,expression:e,history:[{ast:d.clone(),lastReduction:new N.None,step:0,message:p,isNormalForm:h}],macrolistOpen:!1,macrotable:u,editor:{content:e,caretPosition:0,placeholder:r.EVAL_MODE,syntaxError:null}})}catch(E){throw j("Submit Expression from Link","submit invalid",e),E}}(e,t,n)}function I(e){return Object(b.a)({},e,{subtype:s.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(b.a)({},L.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})}var C={SLI:!0,expandStandalones:!0,strategy:!0};function M(e,t,n){var a=new(_(t))(e),i=a.nextReduction;if(a.nextReduction instanceof N.None)return[i,function(e){return e}];if(i instanceof N.Expansion&&i.target instanceof N.ChurchNumeral){var o=a.perform(),r=M(o,t,n),s=Object(x.a)(r,2),l=s[0];s[1];return l instanceof N.None?[l,function(e){return e}]:[i,function(e){return o}]}if(!(i instanceof N.Expansion&&i.target instanceof N.Macro))return[i,function(e){return a.perform()}];var u=function(){var o,r,s=i.parent,l=i.treeSide,u=i.target,m=(i.type,u.clone()),d=e.clone();r=new(_(t))(d).perform();var b=new(_(t))(r).nextReduction;if(b instanceof N.Expansion)return{v:[b,function(){return a.perform()}]};var h=a.perform(),f=null!==s&&null!==l?s[l].clone():h.clone(),E=M(h,t,n),g=Object(x.a)(E,2),y=g[0],v=g[1];if(y instanceof N.None)return{v:[y,function(e){return e}]};if(null!==s&&null!==l&&function e(t,n){if(n.type===N.ASTReductionType.ALPHA){var a=n;if(Array.from(a.conversions).some((function(e){return t.identifier===e.identifier})))return!0}else if(n.type===N.ASTReductionType.BETA){var i=n;if(null!==i.treeSide&&null!==i.parent&&t.identifier===i.parent[i.treeSide].identifier)return!0}else if(n.type===N.ASTReductionType.ETA){var o,r=n;if(t.identifier===(null===(o=r.parent)||void 0===o?void 0:o.identifier))return!0}else if(n.type===N.ASTReductionType.EXPANSION){var s=n;if(t.identifier===s.target.identifier)return!0}else if(n.type===N.ASTReductionType.GAMA){var c=n;if(t.identifier===c.applications[c.applications.length-1].identifier)return!0}return(t instanceof N.Application||t instanceof N.Lambda)&&(e(t.left,n)||e(t.right,n))}(f,y))return{v:[i,function(e){return a.perform()}]};var S=y;if(null!==s&&null!==l&&s instanceof N.Application&&s[l]instanceof N.Lambda&&(null===(o=S.redex)||void 0===o?void 0:o.left.identifier)===s[l].identifier&&y.type===N.ASTReductionType.BETA&&s.identifier===S.redex.identifier){var k=function e(t){return t instanceof N.Lambda?[t.left.name()].concat(Object(p.a)(e(t.right))):[]}(s[l]).length,A=function(e){if(["*","+","/","-","^","DELTA","=",">","<",">=","<=","AND","OR"].includes(e))return 2;if(["ZERO","NOT","SUC","PRED"].includes(e))return 1;return null}(m.name());null!==A&&A<=k&&(k=A);var j=function(e,t,n){var a=new U(e,t,n);return new F(a.applications,a.parents,e)}(k,s,e);if(t===c.APPLICATIVE||["*","+","/","-","^","DELTA","=",">","<",">=","<=","ZERO","NOT","PRED","SUC"].includes(m.name())){var L=!0,R=!1,w=void 0;try{for(var B,D=function(){var e=B.value,a=M(e.right,t,n),i=Object(x.a)(a,2),o=i[0],r=i[1];return o instanceof N.None?"continue":{v:{v:[o,function(t){return e.right=r(e.right),s[l]=m,t}]}}},T=j.applications[Symbol.iterator]();!(L=(B=T.next()).done);L=!0){var I=D();switch(I){case"continue":continue;default:if("object"===typeof I)return I.v}}}catch(C){R=!0,w=C}finally{try{L||null==T.return||T.return()}finally{if(R)throw w}}}return{v:[j,function(e){var a=null,i=null,o=!0,r=!1,s=void 0;try{for(var c,l=j.applications[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,d=j.parents.shift(),p=void 0===d?null:d.left.identifier===u.identifier?O.Child.Left:O.Child.Right,b=new(_(t))(u);b.reducer.perform();var h=b.reducer.tree;void 0===d||null===p?(d=null,p=null,a=e=h):(d[p]=h,a=d[p]),i=d}}catch(C){r=!0,s=C}finally{try{o||null==l.return||l.return()}finally{if(r)throw s}}if(function(e){if(["*","+","/","-","^","DELTA","=",">","<",">=","<=","ZERO","NOT","AND","OR","PRED","SUC"].includes(e.name()))return!0;return!1}(m)){if(null===a)throw"This is bad, real bad.";if(null===i)for(;;){var f=M(e,t,n),E=Object(x.a)(f,2),g=E[0],y=E[1];if(g instanceof N.None)return P(e,n);e=y(e)}else for(var v=i.left.identifier===a.identifier?O.Child.Left:O.Child.Right;;){var S=M(a,t,n),k=Object(x.a)(S,2),A=k[0],L=k[1];if(A instanceof N.None)return i[v]=P(a,n),e;a=L(a)}}return e}]}}return{v:[y,function(e){var t=v(h);return null!==s&&null!==l&&(s[l]=m),t}]}}();return"object"===typeof u?u.v:void 0}function P(e,t){if(function(e){if(!(e instanceof N.Lambda))return!1;if(!(e.body instanceof N.Lambda))return!1;return function e(t,n,a){if(a instanceof N.Variable&&a.name()===n)return!0;if(a instanceof N.Application&&a.left.toString()===t)return e(t,n,a.right);return!1}(e.argument.name(),e.body.argument.name(),e.body.body)}(e)){var n=function(e){var t=e.argument.name(),n=(e.body.argument.name(),e.body.body.toString().match(RegExp(t,"g")));return null===n?0:n.length}(e),a=function(e){return[e.argument.name(),e.body.argument.name()]}(e),i=Object(x.a)(a,2),o=i[0],r=i[1];return 0===n&&"s"===o&&"z"===r?Object(N.parse)(Object(N.tokenize)("0",{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t):0===n&&"t"===o&&"f"===r?Object(N.parse)(Object(N.tokenize)("F",{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t):Object(N.parse)(Object(N.tokenize)("".concat(n),{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t)}for(var s=0,c=[].concat(Object(p.a)(Object.entries(N.builtinMacros)),Object(p.a)(Object.entries(t)));s<c.length;s++){var l=Object(x.a)(c[s],2),u=l[0],m=l[1],d=Object(N.tokenize)(m,{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),b=Object(N.parse)(d,t);if(new A([e,b]).equals)return Object(N.parse)(Object(N.tokenize)(u,{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t)}return e}var F=function e(t,n,a){Object(h.a)(this,e),this.applications=t,this.parents=n,this.arity=a,this.type=N.ASTReductionType.GAMA},U=function(e){function t(e,n,a){var i;return Object(h.a)(this,t),(i=Object(E.a)(this,Object(g.a)(t).call(this))).arity=e,i.basepoint=n,i.parents=[],i.applications=[],i.found=!1,a.visit(Object(y.a)(i)),i}return Object(v.a)(t,e),Object(f.a)(t,[{key:"onApplication",value:function(e){return e.identifier===this.basepoint.identifier?(this.applications.push(e),void(this.found=!0)):(e.left.visit(this),this.found&&e.left.identifier===this.applications[this.applications.length-1].identifier?(this.arity>this.applications.length&&this.applications.push(e),void this.parents.push(e)):void(this.found||(e.right.visit(this),this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e))))}},{key:"onLambda",value:function(e){e.right.visit(this),this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e)}},{key:"onChurchNumeral",value:function(e){}},{key:"onMacro",value:function(e){}},{key:"onVariable",value:function(e){}}]),t}(N.ASTVisitor);function _(e){switch(e){case c.NORMAL:return N.NormalEvaluator;case c.APPLICATIVE:return N.ApplicativeEvaluator;case c.OPTIMISATION:return N.OptimizeEvaluator;case c.ABSTRACTION:return N.NormalAbstractionEvaluator}}var Y=[a.UNTYPED_LAMBDA,a.LISP,a.MARKDOWN],V=[a.UNTYPED_LAMBDA,a.MARKDOWN];var z={boxList:[],activeBoxIndex:NaN,focusedBoxIndex:void 0,allowedBoxes:V,settings:G(V),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:"Default Ntbk",editingName:!1,persistent:!0},K={boxList:[B(w)],activeBoxIndex:0,focusedBoxIndex:0,allowedBoxes:[a.UNTYPED_LAMBDA],settings:G([a.UNTYPED_LAMBDA]),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:"Holo Notebook",editingName:!1,persistent:!0},W=(i.MAIN,o.LIGHT,{notebookList:[Object(b.a)({},K)],currentNotebook:0,currentScreen:i.MAIN,theme:o.LIGHT});function G(e){var t={};-2===e?e=[]:-1===e&&(e=Y);var n=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){switch(r.value){case a.UNTYPED_LAMBDA:t=Object(b.a)({},t,Object(S.a)({},R,w))}}}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return t}function H(){for(var e=Object(S.a)({},R,{}),t=window.localStorage.getItem("global-settings"),n=null===t?e:JSON.parse(t),a=0,i=Object.entries(n);a<i.length;a++){var o=Object(x.a)(i[a],2),r=o[0],s=o[1];switch(r){case R:n[r]=Object(b.a)({},w,{},s);break;default:console.error("Settings CODE NAME is not one of known Code Names.")}}return n}n(115);function X(e){var t=e.state,n=(e.onImport,e.onClearWorkspace),a=(e.onScreenChange,e.onThemeToggle),i=t.currentNotebook,o=t.notebookList,r=(t.currentScreen,o[i]);r.name,function(e){var t=new Blob([e],{type:"application/json"});window.URL.createObjectURL(t)}(JSON.stringify(r));return u.a.createElement("div",{className:"top-bar"},u.a.createElement("span",{className:"top-bar--item-container"},u.a.createElement("span",{className:"top-bar--item top-bar--item-hoverable",title:"Enable Dark Theme",onClick:a},u.a.createElement("i",{className:"top-icon fas fa-moon"}),u.a.createElement("p",{className:"top-bar--icon-label"},"Dark Theme")),u.a.createElement("span",{className:"top-bar--item top-bar--item-hoverable",title:"Clear the Whole Workspace",onClick:n},u.a.createElement("i",{className:"top-icon fas fa-eraser"}),u.a.createElement("p",{className:"top-bar--icon-label"},"Reset All"))))}n(116);function q(e){var t=e.state,n=e.onScreenChange,a=t.currentScreen;return u.a.createElement("div",{id:"menu-bar"},u.a.createElement("div",{className:"tab",title:"Get Info about this Tool",onClick:function(){return n(i.MAIN)}},u.a.createElement("span",{className:"lambdulusIcon"},"\u03bb"),u.a.createElement("p",{className:"iconLabel"},"Lambdulus")),u.a.createElement("div",{className:"menu-bar--bottom-part"},u.a.createElement("div",{className:"tab tab-hoverable",title:"Submit a Bug or a Feature Request"},u.a.createElement("a",{target:"_blank",href:"https://github.com/lambdulus/holo/issues"},u.a.createElement("i",{className:"icon fas fa-bug"})),u.a.createElement("p",{className:"iconLabel"},"GH Issues")),u.a.createElement("div",{className:a===i.HELP?"currentTab tab tab-hoverable":"tab tab-hoverable",title:a===i.MAIN?"Show the Manual":"Go back",onClick:function(){a===i.HELP?n(i.MAIN):n(i.HELP)}},u.a.createElement("i",{className:"icon far fa-question-circle"}),u.a.createElement("p",{className:"iconLabel"},"Manual"))))}n(117);var J="Note in MarkDown";function Z(e){return Object(b.a)({},e,{isEditing:!1})}n(118);function $(e,t){return function(e){return-1===e}(t)||t.includes(e)}function Q(e){var t=e.addNew,n=e.whiteList,i=e.settings[R];return u.a.createElement("div",{className:"box-top-bar--modal--pick-box-type"},-2===n?u.a.createElement("h4",null,"No Boxes Allowed"):u.a.createElement("div",{className:"modal--create-box"},u.a.createElement("div",{className:"modal--create-box--container"},$(a.UNTYPED_LAMBDA,n)?u.a.createElement("div",{className:"add-box--group"},u.a.createElement("div",{className:"plusBtn",title:"Create new \u03bb box",onClick:function(e){e.stopPropagation(),t(B(i))}},u.a.createElement("p",{className:"create-box--big"},"\u03bb"),u.a.createElement("p",{className:"creat-box--label"},"+ Untyped \u03bb Expression"))):null,function(e){return e?u.a.createElement("div",{className:"add-box--group"},u.a.createElement("div",{className:"plusBtn",title:"Create new Lisp box",onClick:function(e){e.stopPropagation(),t({__key:Date.now().toString()})}},u.a.createElement("p",{className:"create-box--big"},"()"),u.a.createElement("p",{className:"creat-box--label"},"+ Lisp"))):null}($(a.LISP,n)),function(e){return e?u.a.createElement("div",{className:"add-box--group"},u.a.createElement("div",{className:"plusBtn",title:"Create new MarkDown box",onClick:function(e){e.stopPropagation(),t({__key:Date.now().toString(),type:a.MARKDOWN,title:"Markdown Box",minimized:!1,menuOpen:!1,settingsOpen:!1,note:"",isEditing:!0,editor:{placeholder:J,content:"",caretPosition:0,syntaxError:null}})}},u.a.createElement("p",{className:"create-box--big"},"M\u2193"),u.a.createElement("p",{className:"creat-box--label"},"+ Markdown"))):null}($(a.MARKDOWN,n)))))}var ee=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={modalOpen:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.addNew,a=(t.whiteList,t.settings),i=(this.state.modalOpen,a[R]);return!1===this.state.modalOpen?u.a.createElement("div",{className:"create-box-plus",onClick:function(){n(B(i))}},u.a.createElement("div",{className:"create-box-plus--button"},u.a.createElement("i",{className:"fas fa-plus"}))):u.a.createElement(Q,{addNew:function(t){n(t),e.setState({modalOpen:!1})},whiteList:this.props.whiteList,settings:this.props.settings})}}]),t}(l.Component),te=(n(54),n(119),function(e){function t(e,n,a,i,o){var r;return Object(h.a)(this,t),(r=Object(E.a)(this,Object(g.a)(t).call(this))).tree=e,r.onClick=n,r.reduction=a,r.breakpoints=i,r.SDE=o,r.rendered=null,r.argument=null,r.redexesFound=0,r.tree.visit(Object(y.a)(r)),r}return Object(v.a)(t,e),Object(f.a)(t,[{key:"printMultiLambda",value:function(e,t){var n=this;if(e.body instanceof N.Lambda){var a=e.body.argument,i="argument",o="";this.isBreakpoint(e.body.argument)&&(i+=" breakpoint",o="Will break on substitution");var r=!1;this.reduction instanceof N.Alpha&&Array.from(this.reduction.conversions).some((function(t){return t.identifier===e.body.identifier}))&&(this.argument=a,r=!0,i+=" alpha");var s=this.argument;this.argument!==e.body.argument&&null!==this.argument&&this.argument.name()===e.body.argument.name()&&(this.argument=null),this.argument&&this.argument.name()===a.name()&&(i+=" substitutedArg");var c=u.a.createElement("span",{className:"arguments"},t," "," ",u.a.createElement("span",{className:i,title:o,onClick:function(){a.identifier=Symbol(),n.onClick({type:N.ASTReductionType.BETA,context:a,broken:new Set}),j("Breakpoint added to argument","Breakpoint was added","")}},a.name()));this.printMultiLambda(e.body,c),!0===r&&(this.argument=null),this.argument=s}else{e.body.visit(this);var l=this.rendered;this.rendered=t,this.rendered=u.a.createElement("span",{className:"function"},"(",u.a.createElement("span",{className:"lambda"},"\u03bb "," "),t," . ",l,")")}}},{key:"isBreakpoint",value:function(e){var t=!0,n=!1,a=void 0;try{for(var i,o=this.breakpoints[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(i.value.context.identifier===e.identifier)return!0}}catch(r){n=!0,a=r}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return!1}}]),Object(f.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t="application",n="left",a="right",i=!1,o=null;if(this.reduction instanceof N.Beta&&(o=this.reduction.redex),this.reduction instanceof F&&this.redexesFound<this.reduction.arity&&this.reduction.applications.some((function(t){return t.identifier===e.identifier}))&&(e.left instanceof N.Macro&&(n+=" extended-redex"),this.redexesFound++,a+=" extended-redex"),this.reduction instanceof N.Gama&&this.reduction.args.includes(e)&&(t+=" redex abstraction argument"),null!==o&&o.identifier===e.identifier&&o===e&&(n+=" redex",a+=" redex",e.left instanceof N.Lambda&&(this.argument=e.left.argument,i=!0)),e.right instanceof N.Application){e.left.visit(this);var r=u.a.createElement("span",{className:n},this.rendered);i&&(this.argument=null),e.right.visit(this);var s=u.a.createElement("span",{className:a},"( ",this.rendered," )");this.rendered=u.a.createElement("span",{className:t},r," ",s)}else{e.left.visit(this);var c=u.a.createElement("span",{className:n},this.rendered);i&&(this.argument=null),e.right.visit(this);var l=u.a.createElement("span",{className:a},this.rendered);this.rendered=u.a.createElement("span",{className:t},c," ",l)}}},{key:"onLambda",value:function(e){var t=this,n="",a=this.argument;if(this.argument!==e.argument&&null!==this.argument&&this.argument.name()===e.argument.name()&&(this.argument=null),e.body instanceof N.Lambda){var i=e.argument,o="argument";this.isBreakpoint(e.argument)&&(o+=" breakpoint",n="Will break on substitution"),this.argument&&this.argument.name()===i.name()&&(o+=" substitutedArg");var r=u.a.createElement("span",{className:o,title:n,onClick:function(){i.identifier=Symbol(),t.onClick({type:N.ASTReductionType.BETA,context:i,broken:new Set}),j("Breakpoint added to argument","Breakpoint was added","")}},e.argument.name());this.printMultiLambda(e,r)}else{var s=e.argument;e.body.visit(this);var c=this.rendered,l="argument",m="";this.isBreakpoint(e.argument)&&(l+=" breakpoint",m="Will break on substitution"),this.argument&&this.argument.name()===s.name()&&(l+=" substitutedArg"),this.rendered=u.a.createElement("span",{className:"function"},"(",u.a.createElement("span",{className:"lambda"},"\u03bb "," "),u.a.createElement("span",{className:"arguments",onClick:function(){s.identifier=Symbol()}},u.a.createElement("span",{className:l,title:m,onClick:function(){s.identifier=Symbol(),t.onClick({type:N.ASTReductionType.BETA,context:s,broken:new Set}),j("Breakpoint added","Breakpoint was added","")}},e.argument.name())," "),". ",c,")")}this.argument=a,null!==a&&(this.argument=a)}},{key:"onChurchNumeral",value:function(e){var t=this,n="churchnumeral",a=null,i="";this.reduction instanceof N.Expansion&&(a=this.reduction.target),this.reduction instanceof N.Gama&&this.reduction.args.includes(e)&&(n+=" redex abstraction argument"),null!==a&&a.identifier===e.identifier&&a===e&&(n+=" redex"),this.isBreakpoint(e)&&(n+=" breakpoint",i="Will break on Expansion"),this.rendered=u.a.createElement("span",{className:n,title:i,onClick:function(){e.identifier=Symbol(),t.onClick({type:N.ASTReductionType.EXPANSION,context:e,broken:new Set}),j("Breakpoint added to ChurchNumeral","Breakpoint was added","")}},e.name())}},{key:"onMacro",value:function(e){var t=this,n="macro",a=null,i="";if(this.reduction instanceof N.Expansion&&(a=this.reduction.target),this.reduction instanceof N.Gama){if(this.reduction.redexes.includes(e))a=Object(x.a)(this.reduction.redexes,1)[0],n+=" redex abstraction";this.reduction.args.includes(e)&&(n+=" redex abstraction argument")}this.reduction instanceof F&&e.identifier===this.reduction.applications[0].left.identifier&&(n+=" abstraction"),null!==a&&a.identifier===e.identifier&&a===e&&(n+=" redex"),this.isBreakpoint(e)&&(n+=" breakpoint",i="Will break on Expansion"),this.rendered=u.a.createElement("span",{className:n,title:i,onClick:function(){e.identifier=Symbol(),t.onClick({type:N.ASTReductionType.EXPANSION,context:e,broken:new Set}),j("Breakpoint added to Macro","Breakpoint was added","")}},e.name())}},{key:"onVariable",value:function(e){var t="variable";this.argument&&this.argument.name()===e.name()&&(t+=" substitutedArg",this.reduction instanceof N.Alpha&&(t+=" alpha")),this.rendered=u.a.createElement("span",{className:t},e.name())}}]),t}(N.ASTVisitor));function ne(e){var t=e.lastReduction;return null===t?null:t.type===N.ASTReductionType.BETA?u.a.createElement("p",{className:"lastReduction"},"\u03b2 reduction"):t.type===N.ASTReductionType.ALPHA?u.a.createElement("p",{className:"lastReduction"},"\u03b1 conversion"):t.type===N.ASTReductionType.EXPANSION?u.a.createElement("p",{className:"lastReduction"},"Macro expansion"):t.type===N.ASTReductionType.ETA?u.a.createElement("p",{className:"lastReduction"},"\u03b7 conversion"):t.type===N.ASTReductionType.GAMA?u.a.createElement("p",{className:"lastReduction"},"Simplified Beta Reduction"):null}var ae=Object(l.memo)((function(e){var t=e.stepRecord,n=e.addBreakpoint,a=e.breakpoints,i=e.children,o=e.strategy,r=e.SDE,s=e.macrotable,c=t.ast,l=t.lastReduction,m=t.step;t.message;if(null===c)return null;var d=c.clone(),p=r?M(d,o,s)[0]:new(_(o))(c).nextReduction;if(!(p instanceof F)&&!(p instanceof N.None)){var b=new(_(o))(c);p=b.nextReduction}var h=new te(c,n,p,a,r),f=0===t.message.indexOf("Incorrect step."),E=0===t.message.indexOf("Correct."),g=f||E;return u.a.createElement("span",{className:"step"},u.a.createElement(ne,{lastReduction:l}),u.a.createElement("div",{className:"inlineblock"},u.a.createElement("p",{className:"stepNumber"},m," :"),h.print(),i,""===t.message?null:!1===g?u.a.createElement("p",{className:"stepMessage"},t.message):!0===f?u.a.createElement("p",{className:"stepMessage incorrect"},"Incorrect input: ",u.a.createElement("i",{className:"userInput"},"`",t.message.substr(15),"`")):u.a.createElement("p",{className:"stepMessage correct"},t.message)))}),(function(e){return!e.lastStep}));function ie(e){return u.a.createElement(ae,e)}function oe(e){var t=e.className,n=e.SDE,a=e.macrotable;return u.a.createElement("div",{className:t+" inactiveBox"},u.a.createElement("ul",{className:"UL"},u.a.createElement("li",{key:0,className:"activeStep LI"},u.a.createElement(ie,{breakpoints:e.breakpoints,strategy:e.strategy,addBreakpoint:function(){},stepRecord:e.history[0],lastStep:!1,SDE:n,macrotable:a}))),u.a.createElement("p",{className:"inactiveMessage"},"Collapsing ",e.history.length-1," ",2===e.history.length?"step":"steps",". Click to activate this box."))}var re,se=n(68),ce=n.n(se);n(155);function le(e){var t=e.placeholder,n=e.content,a=e.syntaxError,i=e.submitOnEnter,o=e.shouldReplaceLambda,r=e.onContent,s=e.onEnter,c=e.onShiftEnter,l=e.onCtrlEnter,m=(n.split("\n").length,function(e){o&&(e=e.replace(/\\/g,"\u03bb")),r(e)});return u.a.createElement("div",{className:"editorContainer"},a?u.a.createElement("p",{className:"editorError"},"".concat(a)):null,u.a.createElement("div",{className:"editor"},u.a.createElement(ue,{placeholder:t,content:n,onContent:function(e){return m(e)},onKeyDown:function(e){e.shiftKey||e.ctrlKey||"Enter"!==e.key?(e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),c()),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),l())):i&&(e.stopPropagation(),e.preventDefault(),s())}})))}function ue(e){e.placeholder;var t=e.content,n=e.onKeyDown,a=e.onContent,i=t.split("\n").length;return u.a.createElement("div",{onKeyDownCapture:n},u.a.createElement(ce.a,{height:Math.max(95,Math.min(760,19*(i+1))),language:"markdown",theme:"vs-light",value:t,options:{formatOnPaste:!0,minimap:{enabled:!1},renderLineHighlight:"none",scrollBeyondLastLine:!1,overviewRulerBorder:!1,scrollbar:{}},onChange:function(e){return a(e)},editorDidMount:function(e,t){return e.focus()}}))}!function(e){e.ENTER_EXPRESSION="Enter Expression",e.ENTER_EXERCISE="Enter Exercise",e.NEXT_STEP="Next Step",e.RUN="Run",e.ENTER_MD="Enter MarkDown"}(re||(re={}));n(156);var me=function(e){function t(e){return Object(h.a)(this,t),Object(E.a)(this,Object(g.a)(t).call(this,e))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.onkeydown=function(t){console.log("KEYDOWN",t.key),t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||"F8"!==t.key&&"F9"!==t.key||("F8"===t.key&&(t.preventDefault(),e.props.onStep()),"F9"===t.key&&(t.preventDefault(),e.props.onRun()))}}},{key:"componentWillUnmount",value:function(){document.onkeydown=function(){}}},{key:"render",value:function(){var e=this.props,t=e.isRunning,n=e.onStep,a=e.onRun,i=t?"Stop the Evaluation (Press F9)":"Evaluate the Expression (Press F9)";return u.a.createElement("div",{className:"debug-controls"},u.a.createElement("button",{title:i,type:"button",className:"btn debug-controls--run",onClick:a},u.a.createElement("span",{className:"debug-controls--btn-label"},t?"Stop":"Run"),u.a.createElement("i",{className:"mini-icon fas fa-play"})),u.a.createElement("button",{title:"Evaluate Next Step (Press F8)",type:"button",className:"btn debug-controls--step",onClick:n,disabled:t},u.a.createElement("span",{className:"debug-controls--btn-label"},"Step"),u.a.createElement("i",{className:"mini-icon fas fa-step-forward"})))}}]),t}(l.PureComponent),de=(n(157),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).addBreakpoint=n.addBreakpoint.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.state,i=t.editor,o=t.shouldShowDebugControls,r=t.isExercise,s=t.setBoxState,l=a.isRunning,m=a.strategy,d=a.SDE,p=a.macrotable,h=a.SLI,f=i.placeholder,E=i.content,g=(i.caretPosition,i.syntaxError),y=Date.now().toString();return u.a.createElement("div",{className:n},u.a.createElement("ul",{className:"UL"},function(e,t,n,a){for(var i=new Array(t-e+1),o=0,r=e;r<=t;++r)i[o++]=a(n[r],r);return i}(0,this.props.history.length-2,this.props.history,(function(t,n){return u.a.createElement("li",{key:n.toString(),className:"inactiveStep LI"},u.a.createElement(ie,{breakpoints:e.props.breakpoints,strategy:e.props.state.strategy,addBreakpoint:function(){},stepRecord:t,lastStep:!1,SDE:d,macrotable:p}))})),u.a.createElement("li",{key:this.props.history.length-1,className:"activeStep LI"},u.a.createElement(ie,{breakpoints:this.props.breakpoints,strategy:this.props.state.strategy,addBreakpoint:this.addBreakpoint,stepRecord:this.props.history[this.props.history.length-1],lastStep:!0,SDE:d,macrotable:p}))),r&&!this.props.isNormalForm?u.a.createElement("div",null,u.a.createElement(le,{placeholder:f,content:E,syntaxError:g,submitOnEnter:!0,onContent:this.props.onContent,onEnter:this.props.onEnter,onShiftEnter:function(){},onCtrlEnter:function(){},onExecute:this.props.onExecute,shouldReplaceLambda:!0}),u.a.createElement("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock"},u.a.createElement("p",{className:"stratsLabel inlineblock"},"Strategy:"),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(y),type:"radio",name:"untyped-lambda-settings--strategy-".concat(y),checked:m===c.NORMAL,onChange:function(){return s(Object(b.a)({},a,{strategy:c.NORMAL}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(y)},"Normal")),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(y),type:"radio",name:"untyped-lambda-settings--strategy-".concat(y),checked:m===c.APPLICATIVE,onChange:function(){return s(Object(b.a)({},a,{strategy:c.APPLICATIVE}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(y)},"Applicative"))),u.a.createElement("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation"},u.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(y),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return s(Object(b.a)({},a,{SDE:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(y)},"Simplified Evaluation"))):!this.props.isNormalForm&&o?u.a.createElement("div",{style:{height:"2.5em"}},u.a.createElement("span",{className:"untyped-lambda--debug-ctrl"},u.a.createElement(me,{isRunning:l,onStep:this.props.onEnter,onRun:this.props.onExecute})),u.a.createElement("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock"},u.a.createElement("p",{className:"stratsLabel inlineblock"},"Strategy:"),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(y),type:"radio",name:"untyped-lambda-settings--strategy-".concat(y),checked:m===c.NORMAL,onChange:function(){return s(Object(b.a)({},a,{strategy:c.NORMAL}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(y)},"Normal")),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(y),type:"radio",name:"untyped-lambda-settings--strategy-".concat(y),checked:m===c.APPLICATIVE,onChange:function(){return s(Object(b.a)({},a,{strategy:c.APPLICATIVE}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(y)},"Applicative"))),u.a.createElement("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation"},u.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(y),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return s(Object(b.a)({},a,{SDE:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(y)},"Simplified Evaluation")),u.a.createElement("span",{className:"untyped-lambda-settings-SLI-",title:"Single Letters as Names without Spaces"},u.a.createElement("input",{id:"untyped-lambda-settings--SLI-".concat(y),type:"checkbox",checked:h,disabled:!1,onChange:function(e){return s(Object(b.a)({},a,{SLI:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(y)},"Single Letter Names"))):null)}},{key:"addBreakpoint",value:function(e){var t=this.props,n=t.state,a=t.setBoxState,i=t.breakpoints,o=i.filter((function(t){return t.type!==e.type||t.context.identifier!==e.context.identifier}));o.length!==i.length?a(Object(b.a)({},n,{breakpoints:o})):a(Object(b.a)({},n,{breakpoints:[].concat(Object(p.a)(i),[e])}))}}]),t}(l.PureComponent)),pe=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).onContent=n.onContent.bind(Object(y.a)(n)),n.onSimplifiedStep=n.onSimplifiedStep.bind(Object(y.a)(n)),n.onStep=n.onStep.bind(Object(y.a)(n)),n.onExecute=n.onExecute.bind(Object(y.a)(n)),n.onRun=n.onRun.bind(Object(y.a)(n)),n.onStop=n.onStop.bind(Object(y.a)(n)),n.shouldBreak=n.shouldBreak.bind(Object(y.a)(n)),n.createBoxFrom=n.createBoxFrom.bind(Object(y.a)(n)),n.onSimplifiedRun=n.onSimplifiedRun.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,a=e.addBox,i=t.minimized,o=t.history,r=t.breakpoints,s=(t.strategy,t.expression,t.editor),c=t.SDE,l=t.macrotable,m=(o.length?o[o.length-1]:{isNormalForm:!1}).isNormalForm;return i?u.a.createElement(oe,{className:"box boxEval",breakpoints:r,history:o,strategy:this.props.state.strategy,SDE:c,macrotable:l,createBoxFrom:this.createBoxFrom}):u.a.createElement(de,{className:"box boxEval",isExercise:!1,state:t,breakpoints:r,history:o,editor:s,isNormalForm:m,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onStep,onExecute:this.onExecute,addBox:a})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,i=t.SLI,o=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:s.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:o,SLI:i,expandStandalones:c,macrolistOpen:!1,macrotable:{},editor:{placeholder:r.EVAL_MODE,content:Object.entries(l).map((function(e){var t=Object(x.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(b.a)({},n,{editor:Object(b.a)({},n.editor,{content:e,syntaxError:null})}))}},{key:"onSimplifiedStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.history,o=(t.editor.content,t.macrotable),r=i[i.length-1],s=r.isNormalForm,c=r.step,l=r.ast.clone(),u=l;if(!s){var m=M(l,a,o),d=Object(x.a)(m,2),h=d[0],f=d[1],E="",g=!1;if(h instanceof F){var y=h.arity;h.applications.length!==y?(r.message="Macro ".concat(P(h.applications[0].left,o)," is given too few arguments."),u=f(u)):u=f(u)}else if(h instanceof N.None){console.log("first is NONE");var v=new N.OptimizeEvaluator(l);if(v.nextReduction instanceof N.None)return console.log("second is NONE"),r.isNormalForm=!0,r.message="Expression is in normal form.",void n(Object(b.a)({},t));console.log("second is ",v.nextReduction),u=v.perform(),h=v.nextReduction}else u=f(u);var S=u.clone(),O=M(S,a,o),k=Object(x.a)(O,2),A=k[0];k[1];A instanceof N.None&&new N.OptimizeEvaluator(S).nextReduction instanceof N.None&&(g=!0,E="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(i),[{ast:u,lastReduction:h,step:c+1,message:E,isNormalForm:g}])})),j("Evaluation Step","Step Normal Form Reached",l.toString())}}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.SDE,o=t.history;t.editor.content;if(i)this.onSimplifiedStep();else{var r=o[o.length-1],s=r.isNormalForm,c=r.step,l=r.ast,u=r.lastReduction;if(l=l.clone(),!s){var m=new(_(a))(l);if(u=m.nextReduction,m.nextReduction instanceof N.None){var d=new N.OptimizeEvaluator(l);if(d.nextReduction instanceof N.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",n(Object(b.a)({},t)),void j("Evaluation Step","Step Normal Form Reached",l.toString());m=d,u=d.nextReduction}var h="",f=!1,E=(l=m.perform()).clone();new(_(a))(E).nextReduction instanceof N.None&&new N.OptimizeEvaluator(E).nextReduction instanceof N.None&&(f=!0,h="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(o),[{ast:l,lastReduction:u,step:c+1,message:h,isNormalForm:f}])})),j("Evaluation Step","Step",l.toString())}}}},{key:"onExecute",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.isRunning,i=t.SDE;if(a)this.onStop();else{var o=t.timeout,r=t.history,s=r[r.length-1];if(s.isNormalForm)return;var c=s.ast,l=s.step,u=s.lastReduction,m=s.isNormalForm;s.message;r.push(r[r.length-1]),r[r.length-2]={ast:c.clone(),step:l,lastReduction:u,message:"Skipping some steps...",isNormalForm:m},n(i?Object(b.a)({},t,{isRunning:!0,timeoutID:window.setTimeout(this.onSimplifiedRun,o)}):Object(b.a)({},t,{isRunning:!0,timeoutID:window.setTimeout(this.onRun,o)})),j("Execution","Run Evaluation",c.toString())}}},{key:"onSimplifiedRun",value:function(){var e=this,t=this.props,n=t.state,a=t.setBoxState,i=n.strategy,o=n.macrotable,r=n.history,s=n.isRunning,c=n.breakpoints,l=n.timeoutID,u=n.timeout,m=r[r.length-1],d=m.isNormalForm,p=m.step,h=m.lastReduction;if(s)if(d)a(Object(b.a)({},n,{isRunning:!1,timeoutID:void 0}));else{var f=m.ast,E=f.clone(),g=M(E,i,o),y=Object(x.a)(g,2),v=y[0],S=y[1];if(h=v,v instanceof N.None)return r.pop(),r.push({ast:f,lastReduction:m.lastReduction,step:p,message:"Expression is in normal form.",isNormalForm:!0}),void a(Object(b.a)({},n,{isRunning:!1,timeoutID:void 0}));var O=c.find((function(e){return e.type===N.ASTReductionType.GAMA&&!e.broken.has(v.applications[0])}));if(v instanceof F&&v.arity!==v.applications.length&&void 0===O)return m.message="Macro ".concat(P(v.applications[0].left,o)," is given too few arguments."),window.clearTimeout(l),j("Evaluation Run Ended","Breakpoint was reached",f.toString()),c.push({type:N.ASTReductionType.GAMA,context:v.applications[0],broken:new Set([v.applications[0]])}),void a(Object(b.a)({},n,{breakpoints:c,isRunning:!1,timeoutID:l}));var k=c.find((function(t){return e.shouldBreak(t,v)}));if(void 0!==k)return v instanceof N.Expansion&&k.broken.add(v.target),v instanceof N.Beta&&v.redex.left instanceof N.Lambda&&k.broken.add(v.redex.left.argument),window.clearTimeout(l),j("Evaluation Run Ended","Breakpoint was reached",f.toString()),void a(Object(b.a)({},n,{isRunning:!1,timeoutID:l}));f=S(E),r[r.length-1]={ast:f,lastReduction:h,step:p+1,message:"",isNormalForm:d},a(Object(b.a)({},n,{timeoutID:window.setTimeout(this.onSimplifiedRun,u)}))}}},{key:"onRun",value:function(){var e=this,t=this.props,n=t.state,a=t.setBoxState,i=n.strategy,o=n.history,r=n.isRunning,s=n.breakpoints,c=n.timeoutID,l=n.timeout,u=o[o.length-1],m=u.isNormalForm,d=u.step,p=u.lastReduction;if(r)if(m)a(Object(b.a)({},n,{isRunning:!1,timeoutID:void 0}));else{var h=u.ast,f=new(_(i))(h);if(p=f.nextReduction,f.nextReduction instanceof N.None)return o.pop(),o.push({ast:h,lastReduction:u.lastReduction,step:d,message:"Expression is in normal form.",isNormalForm:!0}),void a(Object(b.a)({},n,{isRunning:!1,timeoutID:void 0}));var E=s.find((function(t){return e.shouldBreak(t,f.nextReduction)}));if(void 0!==E)return f.nextReduction instanceof N.Expansion&&E.broken.add(f.nextReduction.target),f.nextReduction instanceof N.Beta&&f.nextReduction.redex.left instanceof N.Lambda&&E.broken.add(f.nextReduction.redex.left.argument),window.clearTimeout(c),j("Evaluation Run Ended","Breakpoint was reached",h.toString()),void a(Object(b.a)({},n,{isRunning:!1,timeoutID:c}));h=f.perform(),o[o.length-1]={ast:h,lastReduction:p,step:d+1,message:"",isNormalForm:m},a(Object(b.a)({},n,{timeoutID:window.setTimeout(this.onRun,l)}))}}},{key:"onStop",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.timeoutID;window.clearTimeout(a),n(Object(b.a)({},t,{isRunning:!1,timeoutID:void 0}))}},{key:"shouldBreak",value:function(e,t){return t.type===e.type&&t instanceof N.Beta&&e.context instanceof N.Variable&&t.redex.left instanceof N.Lambda&&t.redex.left.argument.identifier===e.context.identifier&&!e.broken.has(t.redex.left.argument)||(t.type===e.type&&t instanceof N.Expansion&&e.context instanceof N.ChurchNumeral&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target)||t.type===e.type&&t instanceof N.Expansion&&e.context instanceof N.Macro&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target))}}]),t}(l.PureComponent);n(158);function be(e){var t=e.macroTable;return u.a.createElement("div",{className:"macroSpace"},u.a.createElement("p",null,"Built-in Macros:"),u.a.createElement("ul",{className:"UL"},Object.entries(N.builtinMacros).map((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return u.a.createElement("span",{key:n},u.a.createElement("li",{className:"LI dense-LI"},u.a.createElement("span",{className:"macro-definition"},u.a.createElement("i",{className:"macro-name"},n)," := ",a)))}))),u.a.createElement("p",null,"User-defined Macros:"),u.a.createElement("ul",{className:"UL"},Object.entries(t).map((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return u.a.createElement("span",{key:n},u.a.createElement("li",{className:"LI dense-LI"},u.a.createElement("span",{className:"macro-definition"},u.a.createElement("i",{className:"macro-name"},n)," := ",a)))}))))}var he=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).onContent=n.onContent.bind(Object(y.a)(n)),n.onSubmitExpression=n.onSubmitExpression.bind(Object(y.a)(n)),n.parseExpression=n.parseExpression.bind(Object(y.a)(n)),n.onEnter=n.onEnter.bind(Object(y.a)(n)),n.onExerciseStep=n.onExerciseStep.bind(Object(y.a)(n)),n.onSimplifiedExerciseStep=n.onSimplifiedExerciseStep.bind(Object(y.a)(n)),n.onStep=n.onStep.bind(Object(y.a)(n)),n.onSimplifiedStep=n.onSimplifiedStep.bind(Object(y.a)(n)),n.onExecute=n.onExecute.bind(Object(y.a)(n)),n.onRun=n.onRun.bind(Object(y.a)(n)),n.onStop=n.onStop.bind(Object(y.a)(n)),n.shouldBreak=n.shouldBreak.bind(Object(y.a)(n)),n.createBoxFrom=n.createBoxFrom.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,a=e.addBox,i=t.minimized,o=t.history,r=t.breakpoints,s=(t.strategy,t.expression,t.editor),c=t.SDE,l=t.macrotable,m=(o.length?o[o.length-1]:{isNormalForm:!1}).isNormalForm;return i?u.a.createElement(oe,{className:"box boxEval boxExercise",breakpoints:r,history:o,strategy:this.props.state.strategy,SDE:c,macrotable:l,createBoxFrom:this.createBoxFrom}):u.a.createElement(de,{className:"box boxEval boxExercise",isExercise:!0,state:t,breakpoints:r,history:o,editor:s,isNormalForm:m,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onEnter,onExecute:this.onExecute,addBox:a})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,i=t.SLI,o=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:s.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:o,SLI:i,expandStandalones:c,macrolistOpen:!1,macrotable:{},editor:{placeholder:r.EVAL_MODE,content:Object.entries(l).map((function(e){var t=Object(x.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(b.a)({},n,{editor:Object(b.a)({},n.editor,{content:e,syntaxError:null})}))}},{key:"onEnter",value:function(){var e=this.props.state;e.expression;""===e.editor.content&&this.onStep(),this.onExerciseStep()}},{key:"onSubmitExpression",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.editor.content;try{var o=this.parseExpression(i),s="",c=!1,l=o.clone();new(_(a))(l).nextReduction instanceof N.None&&(c=!0,s="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",o.toString())),n(Object(b.a)({},t,{ast:o,expression:i,history:[{ast:o.clone(),lastReduction:new N.None,step:0,message:s,isNormalForm:c}],editor:{content:"",caretPosition:0,placeholder:r.EVAL_MODE,syntaxError:null}})),j("Submit Expression","submit valid",i)}catch(u){n(Object(b.a)({},t,{editor:Object(b.a)({},t.editor,{syntaxError:u.toString()})})),j("Submit Expression","submit invalid",i)}}},{key:"onSimplifiedExerciseStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.history,o=t.editor.content,s=t.macrotable;try{var c=this.parseExpression(o),l=i[i.length-1],u=l.isNormalForm,m=l.step,d=l.ast,h=l.lastReduction;if(d=d.clone(),u)return l.message="No more steps available. Expression is in normal form.",n(Object(b.a)({},t)),void j("Exercise Step","Step Already in normal form",o);var f=d.clone(),E=M(f,a,s),g=Object(x.a)(E,2),y=g[0],v=g[1];if(y instanceof N.None){var S=new N.OptimizeEvaluator(f);if(S.nextReduction instanceof N.None)return l.isNormalForm=!0,l.message="Expression is already in normal form.",n(Object(b.a)({},t)),void j("Simplified Exercise Step","Step Already in Normal Form",o);d=S.perform(),console.log("next step ale dala se udelat eta",d.toString(),c.toString()),h=S.nextReduction}else d=v(f);var O=!1,k=d.clone(),L=M(k,a,s),R=Object(x.a)(L,2),w=R[0];R[1];if(w instanceof N.None)new N.OptimizeEvaluator(k).nextReduction instanceof N.None&&(O=!0,j("Simplified Evaluation Step","Step Normal Form Reached",d.toString()));var B="";new A([c,d]).equals?(d=c,B="Correct.",j("Exercise Step","Valid Step",o)):(B="Incorrect step. ".concat(o),j("Exercise Step","Invalid Step",o)),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(i),[{ast:d,lastReduction:h,step:m+1,message:B,isNormalForm:O}]),editor:Object(b.a)({},t.editor,{content:d.toString(),caretPosition:0,placeholder:r.VALIDATE_MODE,syntaxError:null})}))}catch(D){j("Exercise Step","Syntax error in Step",o)}}},{key:"onExerciseStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.history,o=t.editor.content;if(!0!==t.SDE)try{var s=this.parseExpression(o),c=i[i.length-1],l=c.isNormalForm,u=c.step,m=c.ast,d=c.lastReduction;if(m=m.clone(),l)return c.message="No more steps available. Expression is in normal form.",n(Object(b.a)({},t)),void j("Exercise Step","Step Already in normal form",o);var h=new(_(a))(m);if(d=h.nextReduction,h.nextReduction instanceof N.None){var f=new N.OptimizeEvaluator(m);if(f.nextReduction instanceof N.None)return c.isNormalForm=!0,c.message="Expression is already in normal form.",n(Object(b.a)({},t)),void j("Exercise Step","Step Already in Normal Form",o);h=f,d=f.nextReduction}m=h.perform();var E=!1,g=m.clone();if(new(_(a))(g).nextReduction instanceof N.None)new N.OptimizeEvaluator(g).nextReduction instanceof N.None&&(E=!0,j("Evaluation Step","Step Normal Form Reached",m.toString()));var y="";new A([s,m]).equals?(m=s,y="Correct.",j("Exercise Step","Valid Step",o)):(y="Incorrect step. ".concat(o),j("Exercise Step","Invalid Step",o)),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(i),[{ast:m,lastReduction:d,step:u+1,message:y,isNormalForm:E}]),editor:Object(b.a)({},t.editor,{content:m.toString(),caretPosition:0,placeholder:r.VALIDATE_MODE,syntaxError:null})}))}catch(v){j("Exercise Step","Syntax error in Step",o)}else this.onSimplifiedExerciseStep()}},{key:"onSimplifiedStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.history,o=(t.editor.content,t.macrotable),r=i[i.length-1],s=r.isNormalForm,c=r.step,l=r.ast.clone(),u=l;if(!s){var m=M(l,a,o),d=Object(x.a)(m,2),h=d[0],f=d[1],E="",g=!1;if(h instanceof F){var y=h.arity;h.applications.length!==y?(r.message="Macro ".concat(P(h.applications[0].left,o)," is given too few arguments."),u=f(u)):u=f(u)}else if(h instanceof N.None){var v=new N.OptimizeEvaluator(l);if(v.nextReduction instanceof N.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",void n(Object(b.a)({},t));u=v.perform(),h=v.nextReduction}else u=f(u);var S=u.clone(),O=M(S,a,o),k=Object(x.a)(O,2),A=k[0];k[1];A instanceof N.None&&new N.OptimizeEvaluator(S).nextReduction instanceof N.None&&(g=!0,E="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(i),[{ast:u,lastReduction:h,step:c+1,message:E,isNormalForm:g}])})),j("Evaluation Step","Step Normal Form Reached",l.toString())}}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,i=t.history,o=(t.editor.content,t.SDE),r=i[i.length-1],s=r.isNormalForm,c=r.step,l=r.ast,u=r.lastReduction;if(l=l.clone(),!s)if(o)this.onSimplifiedStep();else{console.log("normal step");var m=new(_(a))(l);if(u=m.nextReduction,m.nextReduction instanceof N.None){var d=new N.OptimizeEvaluator(l);if(d.nextReduction instanceof N.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",n(Object(b.a)({},t)),void j("Evaluation Step","Step Normal Form Reached",l.toString());m=d,u=d.nextReduction}var h="Evaluating One Step for You",f=!1,E=(l=m.perform()).clone();new(_(a))(E).nextReduction instanceof N.None&&new N.OptimizeEvaluator(l).nextReduction instanceof N.None&&(f=!0,h="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(b.a)({},t,{history:[].concat(Object(p.a)(i),[{ast:l,lastReduction:u,step:c+1,message:h,isNormalForm:f}])})),j("Exercise Empty Evaluation Step","Step",l.toString())}}},{key:"onExecute",value:function(){}},{key:"onRun",value:function(){}},{key:"onStop",value:function(){}},{key:"shouldBreak",value:function(e,t){return!1}},{key:"parseExpression",value:function(e){var t=this.props.macroContext.macrotable,n=this.props.state.SLI,a=Object(N.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n,macromap:t});return Object(N.parse)(a,t)}}]),t}(l.PureComponent);n(159);function fe(e){var t=e.settings,n=e.change,a=e.settingsEnabled,i=t.SLI,o=(t.expandStandalones,t.strategy),r=t.SDE,s=a.SLI,l=(a.expandStandalones,a.strategy),m=Date.now().toString();return u.a.createElement("div",{className:"untyped-lambda-box--settings"},s?u.a.createElement("span",{className:"untyped-lambda-settings-SLI",title:"Single Letters as Names without Spaces"},u.a.createElement("input",{id:"untyped-lambda-settings--SLI-".concat(m),type:"checkbox",checked:i,disabled:!1,onChange:function(e){return n(Object(b.a)({},t,{SLI:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(m)},"Single Letter Names")):null,u.a.createElement("span",{className:"untyped-lambda-settings-SDE",title:"Simplified Evaluation"},u.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(m),type:"checkbox",checked:r,disabled:!1,onChange:function(e){return n(Object(b.a)({},t,{SDE:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(m)},"Simplified Evaluation")),null,l?u.a.createElement("div",{className:"untyped-lambda-settings-strategies inlineblock"},u.a.createElement("p",{className:"stratsLabel inlineblock"},"Evaluation Strategies:"),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(m),type:"radio",name:"untyped-lambda-settings--strategy-".concat(m),checked:o===c.NORMAL,onChange:function(){return n(Object(b.a)({},t,{strategy:c.NORMAL}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(m)},"Normal")),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(m),type:"radio",name:"untyped-lambda-settings--strategy-".concat(m),checked:o===c.APPLICATIVE,onChange:function(){return n(Object(b.a)({},t,{strategy:c.APPLICATIVE}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(m)},"Applicative"))):null)}n(160);function Ee(e){var t=e.className,n=e.isActive,a=e.editor,i=e.isMinimized,o=e.setBoxState,r=e.state,s=a.placeholder,l=a.content,m=(a.caretPosition,a.syntaxError),d=r.SDE,p=r.strategy,h=r.SLI,f=Date.now().toString();return u.a.createElement("div",{className:"".concat(t," ").concat(n?"":" inactiveBox")},i?u.a.createElement("div",null,u.a.createElement("p",{className:"inactiveMessage"},"Collapsing Empty Expression Box. Click to activate this box.")):u.a.createElement("div",null,u.a.createElement(le,{placeholder:s,content:l,syntaxError:m,submitOnEnter:!1,shouldReplaceLambda:!0,onContent:e.onContent,onEnter:function(){},onCtrlEnter:e.onDebug,onShiftEnter:e.onExercise,onExecute:function(){}}),u.a.createElement("div",{className:"debug-controls"},u.a.createElement("button",{title:"Debug this Expression in the Evaluator (Ctrl + Enter)",type:"button",className:"open-as-debug btn",onClick:e.onDebug},u.a.createElement("span",{className:"untyped-lambda--submit-expression--btn-label"},"Debug")),u.a.createElement("button",{title:"Exercise this Expression Yourself (Shift + Enter)",type:"button",className:"open-as-exercise btn",onClick:e.onExercise},u.a.createElement("span",{className:"untyped-lambda--submit-expression--btn-label"},"Exercise")))),u.a.createElement("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock",style:{height:"2.5em"}},u.a.createElement("p",{className:"stratsLabel inlineblock"},"Strategy:"),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:p===c.NORMAL,onChange:function(){return o(Object(b.a)({},r,{strategy:c.NORMAL}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(f)},"Normal")),u.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},u.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:p===c.APPLICATIVE,onChange:function(){return o(Object(b.a)({},r,{strategy:c.APPLICATIVE}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(f)},"Applicative"))),u.a.createElement("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation"},u.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(f),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return o(Object(b.a)({},r,{SDE:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(f)},"Simplified Evaluation")),u.a.createElement("span",{className:"untyped-lambda-settings-SLI-",title:"Single Letters as Names without Spaces"},u.a.createElement("input",{id:"untyped-lambda-settings--SLI-".concat(f),type:"checkbox",checked:h,disabled:!1,onChange:function(e){return o(Object(b.a)({},r,{SLI:e.target.checked}))}}),u.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(f)},"Single Letter Names")))}var ge=function(e){function t(e){return Object(h.a)(this,t),Object(E.a)(this,Object(g.a)(t).call(this,e))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,i=t.isActive,o=t.isFocused,r=t.setBoxState,c=t.addBox,l=n.settingsOpen,m=n.subtype,d=n.macrolistOpen,p=n.SLI,h=n.expandStandalones,f=n.strategy,E=n.SDE,g=n.editor,y=n.minimized;return u.a.createElement("div",{ref:function(e){if(null!==e&&i){var t=e.getBoundingClientRect(),n=window.innerHeight;t.bottom>n&&e.scrollIntoView(!1)}}},l?u.a.createElement("div",{className:"box-settings"},"Box Local Settings:",u.a.createElement(fe,{settings:{type:a.UNTYPED_LAMBDA,SLI:p,expandStandalones:h,strategy:f,SDE:E},settingsEnabled:C,change:function(e){r(Object(b.a)({},n,{},e))}})):null,d?u.a.createElement("div",{className:"untyped-lambda-box--macrolist"},u.a.createElement(be,{macroTable:n.macrotable})):null,u.a.createElement("div",null,function(){switch(m){case s.EMPTY:return u.a.createElement(Ee,{className:"box boxEval",isActive:i,isMinimized:y,editor:g,state:n,onContent:function(e){return r(Object(b.a)({},n,{editor:Object(b.a)({},n.editor,{content:e,syntaxError:null})}))},onDebug:function(){return e.onSubmitExpression(s.ORDINARY)},onExercise:function(){return e.onSubmitExpression(s.EXERCISE)},setBoxState:r});case s.ORDINARY:return u.a.createElement(pe,{state:n,isActive:i,isFocused:o,macroContext:L,setBoxState:r,addBox:c});case s.EXERCISE:return u.a.createElement(he,{state:n,isActive:i,isFocused:o,macroContext:L,setBoxState:r,addBox:c})}}()))}},{key:"onSubmitExpression",value:function(e){var t=this.props,n=t.state,a=t.setBoxState,i=n.editor.content,o=n.strategy,s=n.SDE,c=n.SLI,l=i.split(";"),u=l.pop()||"",m=D(l,c);try{var d=this.parseExpression(u,m),p="",h=!1,f=d.clone();if((s?M(f,o,m)[0]:new(_(o))(f).nextReduction)instanceof N.None)new N.OptimizeEvaluator(d).nextReduction instanceof N.None&&(h=!0,p="Expression is in normal form.",j("Evaluation Step","Step Normal Form Reached",d.toString()));a(Object(b.a)({},n,{ast:d,subtype:e,expression:i,macrotable:m,history:[{ast:d.clone(),lastReduction:new N.None,step:0,message:p,isNormalForm:h}],editor:{content:i,caretPosition:0,placeholder:r.EVAL_MODE,syntaxError:null}})),j("Submit Expression","submit valid",i)}catch(E){a(Object(b.a)({},n,{editor:Object(b.a)({},n.editor,{syntaxError:E.toString()})})),j("Submit Expression","submit invalid",i)}}},{key:"parseExpression",value:function(e,t){var n=this.props.state.SLI,a=Object(N.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n,macromap:t});return Object(N.parse)(a,t)}}]),t}(l.PureComponent),ye=(n(56),n(161),n(57));function ve(e){var t=e.state,n=t.note,a=t.editor,i=a.placeholder,o=a.content,r=(a.caretPosition,a.syntaxError),s=t.isEditing,c=e.isActive,l=(e.isFocused,e.setBoxState);return s?u.a.createElement("div",{className:"box boxNoteEditor"},u.a.createElement(le,{placeholder:i,content:o,syntaxError:r,submitOnEnter:!1,shouldReplaceLambda:!1,onContent:function(t){l(Object(b.a)({},e.state,{note:t,editor:Object(b.a)({},e.state.editor,{content:t,syntaxError:null})}))},onEnter:function(){},onCtrlEnter:function(){},onShiftEnter:function(){},onExecute:function(){}})):u.a.createElement("div",{className:"box boxNote",onClick:function(){return c&&l(Object(b.a)({},e.state,{isEditing:!0}))}},u.a.createElement(ye,{className:"markdown-body",source:n}))}function xe(e){return u.a.createElement("div",null,"Empty Box")}function Se(e){var t=e.state,n=e.isActive,i=e.isFocused,o=e.updateBoxState,r=e.addBoxAfter,s=t.type;return s===a.UNTYPED_LAMBDA?u.a.createElement(ge,{state:t,isActive:n,isFocused:i,setBoxState:o,addBox:r}):s===a.MARKDOWN?u.a.createElement(ve,{state:t,isActive:n,isFocused:i,setBoxState:o}):u.a.createElement(xe,null)}n(243);function Ne(e){var t=e.state,n=(e.isActive,e.removeBox,e.updateBoxState),a=t.macrolistOpen;return u.a.createElement("div",{className:""},u.a.createElement("div",{onClick:function(e){e.stopPropagation(),n(Object(b.a)({},t,{macrolistOpen:!a}))},className:"untyped-lambda--top-bar-custom--button ".concat(a?"menu-pressed-open":""),title:a?"Hide Macros":"Show All Macros for This Box"},u.a.createElement("i",{className:"mini-icon fas fa-list-ul"})))}n(244),n(245),n(246).Switch;function Oe(e){var t=e.state,n=(e.isActive,e.removeBox,e.updateBoxState),a=(t.note,t.isEditing);t.title;return u.a.createElement("div",{className:""},u.a.createElement("div",{className:"markdown-controls",title:"Edit as Markdown"},u.a.createElement("div",{className:"markdown-editing"},u.a.createElement("span",{className:"markdown-write ".concat(a?"markdown-selected":""),onClick:function(e){e.stopPropagation(),!1===a&&n(Object(b.a)({},t,{isEditing:!0}))}},"Edit"),u.a.createElement("span",{className:"markdown-preview ".concat(a?"":"markdown-selected"),onClick:function(e){e.stopPropagation(),!0===a&&n(Object(b.a)({},t,{isEditing:!1}))}},"Preview"))))}function ke(e){return u.a.createElement("div",null)}n(247);var Ae=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={modalOpen:!1,where:null,menuOpen:!1,shareLinkOpen:!1},n.selectBoxType=n.selectBoxType.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,i=t.isActive,o=t.updateBoxState,r=t.removeBox,s=(t.addBoxBefore,t.addBoxAfter,n.type),c=(n.title,n.minimized,n.settingsOpen,this.state),l=(c.modalOpen,c.where,c.menuOpen),m=c.shareLinkOpen;return u.a.createElement("div",{className:"boxTopBar"},u.a.createElement("div",{className:"topBarTitle"}),u.a.createElement("div",{className:"box-top-bar-custom"},s===a.UNTYPED_LAMBDA?u.a.createElement(Ne,{state:n,isActive:i,removeBox:r,updateBoxState:o}):s===a.MARKDOWN?u.a.createElement(Oe,{state:n,isActive:i,removeBox:r,updateBoxState:o}):u.a.createElement(ke,null)),u.a.createElement("div",{className:"box-top-bar-controls"},u.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.setState({menuOpen:!l})},className:"box-top-bar--controls--menu ".concat(l?"menu-pressed-open":"")},u.a.createElement("i",{className:"mini-icon fas fa-ellipsis-v"}))),l?u.a.createElement("div",{className:"box-top-bar--menu",ref:function(e){if(null!==e){var t=e.getBoundingClientRect(),n=window.innerHeight;t.bottom>n&&e.scrollIntoView(!1)}}},u.a.createElement("div",{className:"box-top-bar--menu-item",onClick:function(){e.setState({shareLinkOpen:!0});var t=new URL(window.document.location.toString()).searchParams;t.set("type",n.type),n.type===a.UNTYPED_LAMBDA?t.set("source",encodeURI(n.expression||n.editor.content)):t.set("source",encodeURI(n.editor.content)),n.type===a.UNTYPED_LAMBDA&&(t.set("subtype",n.subtype),t.set("strategy",n.strategy),t.set("SDE",n.SDE.toString()),t.set("SLI",n.SLI.toString()));var i=window.location.host+"/holo?"+t.toString();navigator.clipboard.writeText(i),setTimeout((function(){return e.setState({shareLinkOpen:!1,menuOpen:!1})}),1500)},title:"Get shareable link for this Box"},"Share the URL"),m?u.a.createElement("p",{className:"box-top-bar--menu-item--notif"},"Link Copied!"):null,u.a.createElement("div",{className:"box-top-bar--menu-item",title:"Reset the Expression",onClick:function(t){switch(t.stopPropagation(),s){case a.UNTYPED_LAMBDA:o(I(n));break;case a.MARKDOWN:o(function(e){return Object(b.a)({},e,{minimized:!1,note:"",isEditing:!0,editor:{placeholder:J,content:"",caretPosition:0,syntaxError:null}})}(n))}e.setState({menuOpen:!1})}},"Reset this Box"),u.a.createElement("div",{className:"box-top-bar--menu-item",title:"Edit this Box's Expression",onClick:function(t){switch(t.stopPropagation(),s){case a.UNTYPED_LAMBDA:var i=I(n);o(Object(b.a)({},i,{editor:Object(b.a)({},i.editor,{content:n.expression})}));break;case a.MARKDOWN:}e.setState({menuOpen:!1})}},"Edit Expression")):null)}},{key:"selectBoxType",value:function(e){this.setState({modalOpen:!0,where:e})}}]),t}(l.Component);n(248);function je(e){var t=e.isActiveBox,n=e.isFocusedBox,i=e.box,o=e.makeActive,r=e.onBlur,s=e.updateBoxState,c=e.addBoxBefore,l=e.addBoxAfter,m=e.removeBox,d=(i.settingsOpen,function(e){switch(e){case a.UNTYPED_LAMBDA:return"untypedLambdaBox";case a.MARKDOWN:return"markDownBox";default:return""}}(i.type));return u.a.createElement("div",{className:"boxContainer ".concat(t?"active":"inactive"," ").concat(d),onClick:o,onBlur:r},u.a.createElement(Ae,{state:i,isActive:t,isFocused:n,removeBox:function(e){e.stopPropagation(),m()},updateBoxState:s,addBoxBefore:c,addBoxAfter:l,settings:e.settings,whiteList:e.whiteList}),u.a.createElement(Se,{state:i,isActive:t,isFocused:n,updateBoxState:s,addBoxAfter:l}))}var Le=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).insertBefore=n.insertBefore.bind(Object(y.a)(n)),n.insertAfter=n.insertAfter.bind(Object(y.a)(n)),n.removeBox=n.removeBox.bind(Object(y.a)(n)),n.updateBoxState=n.updateBoxState.bind(Object(y.a)(n)),n.makeActive=n.makeActive.bind(Object(y.a)(n)),n.onBlur=n.onBlur.bind(Object(y.a)(n)),n.createBoxFromURL=n.createBoxFromURL.bind(Object(y.a)(n)),n.setBoxState=n.setBoxState.bind(Object(y.a)(n)),n.updateURL=n.updateURL.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,a=t.settings,i=n.activeBoxIndex,o=n.focusedBoxIndex,r=n.boxList,s=n.allowedBoxes;return u.a.createElement("div",{className:"mainSpace"},u.a.createElement("ul",{className:"boxList UL"},r.map((function(t,n){return u.a.createElement("li",{className:"LI",key:t.__key},u.a.createElement(je,{box:t,isActiveBox:i===n,isFocusedBox:o===n,addBoxBefore:function(t){return e.insertBefore(n,t)},addBoxAfter:function(t){return e.insertAfter(n,t)},makeActive:function(){return e.makeActive(n)},removeBox:function(){return e.removeBox(n)},updateBoxState:function(t){return e.updateBoxState(n,t)},onBlur:function(){return e.onBlur(n)},whiteList:s,settings:a}))})),0===r.length?u.a.createElement(ee,{addNew:function(t){return e.insertBefore(n.boxList.length,t)},whiteList:s,settings:a}):null))}},{key:"createBoxFromURL",value:function(){new URL(window.location.toString()).searchParams.get("type")}},{key:"setBoxState",value:function(e,t){}},{key:"insertBefore",value:function(e,t){var n=this.props.state.boxList,a=Object(p.a)(n);a.splice(e,0,t),this.props.updateNotebook({boxList:a,activeBoxIndex:e,focusedBoxIndex:e})}},{key:"insertAfter",value:function(e,t){var n=this.props.state.boxList;n.splice(e+1,0,t),this.props.updateNotebook({boxList:n,activeBoxIndex:e+1,focusedBoxIndex:e+1})}},{key:"removeBox",value:function(e){var t,n=this.props.state,a=n.boxList,i=n.activeBoxIndex,o=(t=e)<i?i-1:t>i?i:1===a.length?NaN:0===t?t:t-1;a.splice(e,1),this.props.updateNotebook({boxList:a,activeBoxIndex:o})}},{key:"updateBoxState",value:function(e,t){var n=this.props.state.boxList;n[e]=Object(b.a)({},t),this.updateURL(t),this.props.updateNotebook({boxList:Object(p.a)(n),activeBoxIndex:e})}},{key:"makeActive",value:function(e){var t,n=this.props.state,i=n.activeBoxIndex,o=n.focusedBoxIndex,r=n.boxList;switch(r[i].type){case a.UNTYPED_LAMBDA:break;case a.MARKDOWN:r[i]=Z(r[i])}if(e!==i||e!==o||!0===r[e].minimized){var s={minimized:!1};switch(r[e].type){case a.MARKDOWN:r[e]=Object(b.a)({},(t=r[e],Object(b.a)({},t,{isEditing:!0})),{},s);default:r[e]=Object(b.a)({},r[e],{},s)}this.updateURL(r[e]),this.props.updateNotebook({activeBoxIndex:e,focusedBoxIndex:e,boxList:r})}}},{key:"onBlur",value:function(e){var t=this.props.state,n=t.boxList;if(t.activeBoxIndex===e){switch(n[e].type){case a.UNTYPED_LAMBDA:break;case a.MARKDOWN:n[e]=Z(n[e])}this.props.updateNotebook({boxList:n,focusedBoxIndex:void 0})}}},{key:"updateURL",value:function(e){}}]),t}(l.PureComponent),Re=n(57);function we(e){return u.a.createElement("div",{className:"helpSpace"},u.a.createElement(Re,{className:"markdown-body",source:"# User guide\n\n## Typing Expressions\nTo write a lambda expression you simply type in the prompt.\n\n## Typing \u03bb Symbol\nIf you want to write a `\u03bb` symbol inside of the Interactive Box - you simply type `\\` and Lambdulus will take care of the rest.\n\n## Share your Expression\nIf you want to share your expression together with your defined macros and settings - you click on the `vertical triple dot` icon at the top right of the Box and then click on the `Share the URL` item. This will copy the link to your work to your clip board - then you can paste it anywhere and share the expression you wrote.\n\n## Clear the Workspace\nThere are two types of clearing. The `Reset All` button in the top panel of the web app resets everything to the default state. This means it will reset your settings and the expression itself.\n\nThe other clear is hidden inside the `vertical triple dot` menu and it just deletes the content of the Box (expression and macros) but keeps the settings. Use whichever you need.\n\n## Dark Theme\nThis is currently experimental and work in progress. But at least some dark mode is better than none right?\n\n## Single Letter Names\nYou can write lambda functions and omit whitespaces such as `(\u03bbabc.cba) 2 1 +`. To do that you have to check switch `Single Letter Names` at the bottom of the Box.\n\n## Evaluation Strategies\nYou have an option to select from 2 evaluation strategies. The `Normal` and the `Applicative` strategies differ in the way they treat arguments when doing beta-reduction - `Normal` doesn't evaluate it before applying but `Applicative` does. More about this in your class.\n\n##  Simplified Evaluation\nThe `Simplified` meta-strategy is a specific evaluation order which behaves more transparently - it was specificaly created and formalized to help you understand how more complex expression evaluate so don't hesitate to use it.\n\n## Macros\nYou may want to define your own `macro` (named expression) - and you can. You just write one or many `macro definition` before the actual lambda expression you want to evaluate. `Macro definition` consists of [macro name] followed by the symbol `:=` and then a valid lambda expression followed by the symbol `;`.\n\n## Macro Definition\nInside the macro definition you can reference any valid macro which is already defined or will be defined in the future. Yes you can reference a macro you are defining right now inside it's own definition. That means you can create recursive macros easily - whether you should or not is up to you.\n\n## List All Macros\nIf you want to list all defined macros - built-in ones and also your own - you simply click on the `list` symbol icon at the right top of the Box.\n\n## Report a Bug or Request New Features\nIf you want to report a bug or you need some feature - click on the `GH Issues` button at the bottom left. Then fill in the issue on the GitHub page of the project. Definitely don't forget to check if the corresponding issue already exist.\n"}))}function Be(e){var t=e.settings,n=e.updateSettings,a=t[R];return u.a.createElement("div",{className:"settingsSpace"},u.a.createElement("h2",null,"Settings for Untyped Lambda Calculus:"),u.a.createElement(fe,{settings:a,settingsEnabled:C,change:function(e){return n(Object(b.a)({},t,Object(S.a)({},R,e)))}}))}var De=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(g.a)(t).call(this,e))).state=Object(b.a)({},W),n.setScreen=n.setScreen.bind(Object(y.a)(n)),n.updateNotebook=n.updateNotebook.bind(Object(y.a)(n)),n.changeNotebook=n.changeNotebook.bind(Object(y.a)(n)),n.updateSettings=n.updateSettings.bind(Object(y.a)(n)),n.clearWorkspace=n.clearWorkspace.bind(Object(y.a)(n)),n.selectNotebook=n.selectNotebook.bind(Object(y.a)(n)),n.updateNthNotebook=n.updateNthNotebook.bind(Object(y.a)(n)),n.createNotebookFromURL=n.createNotebookFromURL.bind(Object(y.a)(n)),n.onThemeToggle=n.onThemeToggle.bind(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"onThemeToggle",value:function(){this.state.theme===o.LIGHT?(this.setState({theme:o.DARK}),document.body.setAttribute("class","dark")):(this.setState({theme:o.LIGHT}),document.body.setAttribute("class","light"))}},{key:"componentDidMount",value:function(){this.createNotebookFromURL()}},{key:"createNotebookFromURL",value:function(){var e=new URL(window.location.toString()).searchParams,t=e.get("type");if(null!==t)switch(t){case a.UNTYPED_LAMBDA:var n=e.get("source"),o=e.get("subtype"),r=e.get("strategy"),l=e.get("SDE"),u=e.get("SLI");if(null===n||null===o||null===r||null===l||null===u)return;var m=c.NORMAL===r?c.NORMAL:c.APPLICATIVE,d="true"===u,p=Object(b.a)({},w,{strategy:m,SDE:"true"===l,SLI:d}),h=o===s.EMPTY?s.EMPTY:o===s.ORDINARY?s.ORDINARY:o===s.EXERCISE?s.EXERCISE:s.EMPTY;try{var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Notebook from Link",t=arguments.length>1?arguments[1]:void 0;return{boxList:[t],activeBoxIndex:0,focusedBoxIndex:0,allowedBoxes:V,settings:H(),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:e,editingName:!1,persistent:!0}}("Notebook from Link",T(decodeURI(n),p,h));this.setState({currentScreen:i.MAIN,notebookList:[f],currentNotebook:0}),window.history.pushState(null,"","/holo")}catch(E){window.history.replaceState(null,"","/holo")}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.notebookList,a=t.currentNotebook,r=t.currentScreen,s=t.theme,c=n[a],l=c.settings;return u.a.createElement("div",{id:"app ".concat(s===o.DARK?"dark":"light")},u.a.createElement(X,{state:this.state,onScreenChange:this.setScreen,onImport:function(){},onClearWorkspace:function(){return window.location.reload()},onThemeToggle:this.onThemeToggle}),u.a.createElement(q,{state:this.state,onScreenChange:this.setScreen}),r===i.MAIN?u.a.createElement(Le,{state:c,updateNotebook:e.updateNotebook,settings:l}):r===i.HELP?u.a.createElement(we,null):r===i.SETTINGS?u.a.createElement(Be,{settings:l,updateSettings:e.updateSettings}):void 0)}},{key:"selectNotebook",value:function(e){this.setState({currentScreen:i.MAIN,currentNotebook:e})}},{key:"setScreen",value:function(e){this.setState({currentScreen:e})}},{key:"updateNotebook",value:function(e){var t=this.state,n=t.notebookList,a=t.currentNotebook;n[a]=Object(b.a)({},n[a],{},e),this.setState({notebookList:n})}},{key:"updateNthNotebook",value:function(e,t){var n=this.state.notebookList;n[t]=e,this.setState({notebookList:n})}},{key:"changeNotebook",value:function(e){this.setState({currentNotebook:e})}},{key:"updateSettings",value:function(e){var t=this.state,n=t.currentNotebook,a=t.notebookList;a[n].settings=e,this.setState({notebookList:Object(p.a)(a)})}},{key:"clearWorkspace",value:function(){if(window.confirm("This will delete this whole Notebook from your browser's memory.\n\n                                          Are you sure?")){var e=this.state,t=(e.currentNotebook,e.notebookList);console.log("//////////////////////////////////////////////////"),console.log(Object(p.a)(t)),this.setState({notebookList:[Object(b.a)({},K)]})}}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(u.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){},69:function(e,t,n){e.exports=n(249)},74:function(e,t,n){},75:function(e,t,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.59f588cf.chunk.js.map