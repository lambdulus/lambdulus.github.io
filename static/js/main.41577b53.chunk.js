(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(55),o=a.n(r),s=(a(63),a(26)),c=a(17),l=a(2),m=a(15),u=a(14),d=a(23),p=a(22),f=a(24),E=a(3);a(64);function b(e){return e.trim()}var h={FACT:"(Y (\u03bb f n . (<= n 1) 1 (* n (f (- n 1)))))",FACCT:"(\u03bb n . (Y (\u03bb f n a . IF (= n 1) a (f (- n 1) (* n a)))) (- n 1) (n))",FIB:"(Y (\u03bb f n . (= n 0) 0 ((= n 1) 1 ( + (f (- n 1)) (f (- n 2))))))",APPEND:"Y (\u03bb fn listA listB . IF (NULL listA) (listB) (CONS (FIRST listA) (fn (SECOND listA) listB)))",LISTGREQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (>= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTLESS:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (< (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTGR:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (> (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTEQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",QUICKSORT:"Y (\u03bb fn list . IF (NULL list) (NIL) ( IF (NULL (SECOND list)) (list) ( APPEND (fn (LISTLESS (FIRST list) list)) ( APPEND (LISTEQ (FIRST list) list) (fn (LISTGR (FIRST list) list)) ) ) ) )",INFLIST:"(\u03bb n . (Y (\u03bb x . (\u03bb f s g . g f s) n x)))",REMOVENTH:"Y (\u03bb fn list n . IF (= n 0) (SECOND list) (IF (NULL list) NIL (CONS (FIRST list) (fn (SECOND list) (- n 1) ) ) ) )",NTH:"Y (\u03bb fn list n . IF (= n 0) (FIRST list) (IF (NULL (list)) NIL (fn (SECOND list) (- n 1)) ) )",LEN:"Y (\u03bb fn list . IF (NULL list) (0) (+ 1 (fn (SECOND list) )) )",GETNTH:"(\u03bb end . (Y (\u03bb f n i . (end i) (i) ( (= n 0) (Y (\u03bb f a . (end a) (i) (f) ) ) (f (- n 1)) ) )) )",MAP:"(\u03bb fn l . (Y (\u03bb f it . IF (NULL it) (NIL) (CONS (fn (FIRST it)) (f (SECOND it))) )) l )",REDUCE:"(\u03bb fn l init . Y (\u03bb f it acc . IF (NULL it) (acc) (f (SECOND it) (fn (FIRST it) acc)) ) l init )",APPLY:"(\u03bb f args . Y (\u03bb ff f l . (NULL l) (f) (ff (f (FIRST l)) (SECOND l)) ) f args )",RANGE:"(\u03bb m n . Y (\u03bb f e . (= e n) (CONS e NIL) (CONS e (f (+ e 1))) ) m )",LISTCOMPR:"(\u03bb args . APPLY (\u03bb op in rng cond . Y (\u03bb f l . (NULL l) (NIL) ( (cond (FIRST l)) (CONS (op (FIRST l)) (f (SECOND l))) (CONS (FIRST l) (f (SECOND l))) ) ) rng ) args )",MOD:"(\u03bb n m . (n (\u03bb n . (= n (- m 1)) (0) (+ n 1)) (0)) )",INFIX:"APPLY (\u03bb l op r . op l r)"},v=a(1),x=(a(99),a(100),a(101),a(41)),g=x.Switch;x.Radio;function N(e){var t=e.isExercise,a=e.makeExercise,n=e.endExercise;return i.a.createElement("div",{id:"controls"},i.a.createElement("div",null,i.a.createElement(g,{className:"exerciseSwitch",checked:t,onChange:function(e){return e.target.checked?a():n()},shape:"fill"},"Exercise")))}a(102);var O=function(e){function t(e,a,n,i){var r;return Object(m.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this))).tree=e,r.onClick=a,r.redex=n,r.breakpoints=i,r.rendered=null,r.argument=null,r.tree.visit(Object(E.a)(Object(E.a)(r))),r}return Object(f.a)(t,e),Object(u.a)(t,[{key:"printMultiLambda",value:function(e,t){var a=this;if(e.body instanceof v.Lambda){var n=e.body.argument,r="argument";this.isBreakpoint(e.body.argument)&&(r+=" breakpoint"),this.argument&&this.argument.name()===n.name()&&(r+=" substitutedArg");var o=i.a.createElement("span",{className:"arguments"},t," "," ",i.a.createElement("span",{className:r,onClick:function(){n.identifier=Symbol(),a.onClick({type:v.Beta,context:n,broken:new Set})}},n.name()));this.printMultiLambda(e.body,o)}else{e.body.visit(this);var s=this.rendered;this.rendered=t,this.rendered=i.a.createElement("span",{className:"function"},"(",i.a.createElement("span",{className:"lambda"},"\u03bb "," "),t," . ",s,")")}}},{key:"isBreakpoint",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.breakpoints[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){if(i.value.context.identifier===e.identifier)return!0}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return!1}}]),Object(u.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t="left",a="right",n=!1;if(null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(t+=" redex",a+=" redex",e.left instanceof v.Lambda&&(this.argument=e.left.argument,n=!0)),e.right instanceof v.Application){e.left.visit(this);var r=i.a.createElement("span",{className:t},this.rendered);n&&(this.argument=null),e.right.visit(this);var o=i.a.createElement("span",{className:a},"( ",this.rendered," )");this.rendered=i.a.createElement("span",{className:"application"},r," ",o)}else{e.left.visit(this);var s=i.a.createElement("span",{className:t},this.rendered);n&&(this.argument=null),e.right.visit(this);var c=i.a.createElement("span",{className:a},this.rendered);this.rendered=i.a.createElement("span",{className:"application"},s," ",c)}}},{key:"onLambda",value:function(e){var t=this,a=this.argument;if(this.argument!==e.argument&&null!==this.argument&&this.argument.name()===e.argument.name()&&(this.argument=null),e.body instanceof v.Lambda){var n=e.argument,r="argument";this.isBreakpoint(e.argument)&&(r+=" breakpoint"),this.argument&&this.argument.name()===n.name()&&(r+=" substitutedArg");var o=i.a.createElement("span",{className:r,onClick:function(){n.identifier=Symbol(),t.onClick({type:v.Beta,context:n,broken:new Set})}},e.argument.name());this.printMultiLambda(e,o)}else{var s=e.argument;e.argument.visit(this);var c=this.rendered;e.body.visit(this);var l=this.rendered,m="argument";this.isBreakpoint(e.argument)&&(m+=" breakpoint"),this.rendered=i.a.createElement("span",{className:"function"},"(",i.a.createElement("span",{className:"lambda"},"\u03bb "," "),i.a.createElement("span",{className:m,onClick:function(){s.identifier=Symbol(),t.onClick({type:v.Beta,context:s,broken:new Set})}},c," "," "),". ",l,")")}null!==a&&(this.argument=a)}},{key:"onChurchNumeral",value:function(e){var t=this,a="churchnumeral";null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(a+=" redex"),this.isBreakpoint(e)&&(a+=" breakpoint"),this.rendered=i.a.createElement("span",{className:a,onClick:function(){e.identifier=Symbol(),t.onClick({type:v.Expansion,context:e,broken:new Set})}},e.name())}},{key:"onMacro",value:function(e){var t=this,a="macro";null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(a+=" redex"),this.isBreakpoint(e)&&(a+=" breakpoint"),this.rendered=i.a.createElement("span",{className:a,onClick:function(){e.identifier=Symbol(),t.onClick({type:v.Expansion,context:e,broken:new Set})}},e.name())}},{key:"onVariable",value:function(e){var t="variable";this.argument&&this.argument.name()===e.name()&&(t+=" substitutedArg"),this.rendered=i.a.createElement("span",{className:t},e.name())}}]),t}(v.ASTVisitor),S=a(30);function y(e){var t=e.lastReduction;return null===t?null:t instanceof v.Beta?i.a.createElement("p",{className:"lastReduction"},"\u03b2 reduction"):t instanceof v.Alpha?i.a.createElement("p",{className:"lastReduction"},"\u03b1 conversion"):t instanceof v.Expansion?i.a.createElement("p",{className:"lastReduction"},"Macro expansion"):t instanceof S.Eta?i.a.createElement("p",{className:"lastReduction"},"\u03b7 conversion"):null}function k(e){var t=e.stepRecord,a=e.addBreakpoint,n=e.breakpoints,r=e.children,o=e.strategy,s=t.ast,c=t.lastReduction,l=t.step;t.message;if(null===s)return null;var m=null,u=new(A(o))(s);u.nextReduction instanceof v.Beta&&(m=u.nextReduction.redex),u.nextReduction instanceof v.Expansion&&(m=u.nextReduction.target);var d=new O(s,a,m,n);return i.a.createElement("span",{className:"step"},i.a.createElement(y,{lastReduction:c}),i.a.createElement("div",{className:"inlineblock"},i.a.createElement("p",{className:"stepNumber"},l," :"),d.print(),r,""===t.message?null:i.a.createElement("p",{className:"stepMessage"},t.message)))}var j;a(103);function I(e){var t=e.placeholder,a=e.content,n=e.caretPosition,r=e.syntaxError,o=e.isMarkDown,s=e.onContent,c=e.onEnter,l=e.onExecute,m=a.split("\n").length;return i.a.createElement("div",{className:"editorContainer"},r?i.a.createElement("p",{className:"editorError"},"".concat(r)):null,i.a.createElement("div",{className:"editor"},i.a.createElement(L,{placeholder:t,content:a,lines:m,caretPosition:n,onChange:function(e){var t=e.target.value,a=e.target.selectionEnd;t=t.replace(/\\/g,"\u03bb"),s(t,a)},onKeyDown:function(e){if(!e.shiftKey&&!e.ctrlKey&&"Enter"===e.key){if(o)return;e.preventDefault(),c()}e.shiftKey&&"Enter"===e.key&&o&&(e.preventDefault(),c()),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),l())}})))}function L(e){var t=e.placeholder,a=e.content,n=e.lines,r=e.onChange,o=e.onKeyDown,s=e.caretPosition;return i.a.createElement("textarea",{className:"prompt",onKeyDown:o,onChange:r,value:a,placeholder:t,wrap:"hard",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,rows:Math.max(n,1),ref:function(e){null!==e&&(e.selectionStart=s,e.selectionEnd=s,e.focus())}})}!function(e){e.ENTER_EXPRESSION="Enter Expression",e.ENTER_EXERCISE="Enter Exercise",e.NEXT_STEP="Next Step",e.RUN="Run",e.ENTER_MD="Enter MarkDown"}(j||(j={}));var B=a(16),R=a(56),C=function(){function e(t){Object(m.a)(this,e),this.roots=t,this.translator=new Map,this.equals=!0,this.context=void 0;var a=t,n=Object(R.a)(a);this.context=n.slice(0),this.compare()}return Object(u.a)(e,[{key:"compare",value:function(){var e=Object(B.a)(this.context,2),t=e[0],a=e[1];if(t instanceof v.Lambda&&a instanceof v.Lambda){var n=new Map(this.translator.entries());this.translator.set(t.argument.name(),a.argument.name()),this.context=[t.right,a.right],this.compare(),this.translator=n}else if(t instanceof v.Application&&a instanceof v.Application){if(this.context=[t.left,a.left],this.compare(),!this.equals)return;this.context=[t.right,a.right],this.compare()}else t instanceof v.Macro&&a instanceof v.Macro?this.equals=t.name()===a.name():t instanceof v.ChurchNumeral&&a instanceof v.ChurchNumeral?this.equals=t.name()===a.name():t instanceof v.Variable&&a instanceof v.Variable?this.equals=this.translator.get(t.name())===a.name():this.equals=!1}}]),e}();function A(e){switch(e){case K.NORMAL:return v.NormalEvaluator;case K.APPLICATIVE:return v.ApplicativeEvaluator;case K.OPTIMISATION:return v.OptimizeEvaluator}}var M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).addBreakpoint=a.addBreakpoint.bind(Object(E.a)(Object(E.a)(a))),a.onContent=a.onContent.bind(Object(E.a)(Object(E.a)(a))),a.onSubmitExpression=a.onSubmitExpression.bind(Object(E.a)(Object(E.a)(a))),a.parseExpression=a.parseExpression.bind(Object(E.a)(Object(E.a)(a))),a.onEnter=a.onEnter.bind(Object(E.a)(Object(E.a)(a))),a.onExerciseStep=a.onExerciseStep.bind(Object(E.a)(Object(E.a)(a))),a.onStep=a.onStep.bind(Object(E.a)(Object(E.a)(a))),a.onExecute=a.onExecute.bind(Object(E.a)(Object(E.a)(a))),a.onRun=a.onRun.bind(Object(E.a)(Object(E.a)(a))),a.onStop=a.onStop.bind(Object(E.a)(Object(E.a)(a))),a.shouldBreak=a.shouldBreak.bind(Object(E.a)(Object(E.a)(a))),a.createBoxFrom=a.createBoxFrom.bind(Object(E.a)(Object(E.a)(a))),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.state,n=t.isActive,r=t.addBox,o=(a.__key,a.history),s=(a.isRunning,a.breakpoints),c=a.isExercise,m=(a.strategy,a.singleLetterNames,a.expression),u=a.editor,d=u.caretPosition,p=u.content,f=u.placeholder,E=u.syntaxError,b="box boxEval";if(""===m)return i.a.createElement("div",{className:b+" inactiveBox",onDoubleClick:this.props.makeActive},i.a.createElement("p",{className:"emptyStep"},"Empty expression box."),n?i.a.createElement(I,{placeholder:f,content:p,caretPosition:d,syntaxError:E,isMarkDown:!1,onContent:this.onContent,onEnter:this.onEnter,onExecute:this.onExecute}):i.a.createElement("p",{className:"inactiveMessage"},"Collapsing ",Math.max(0,o.length-1)," steps. Double click to activate this box."));o[o.length-1];return c&&(b+=" boxExercise"),n?i.a.createElement("div",{className:b},i.a.createElement(N,{isExercise:c,makeExercise:function(){return e.props.setBoxState(Object(l.a)({},a,{isExercise:!0,editor:Object(l.a)({},a.editor,{placeholder:J.VALIDATE_MODE})}))},endExercise:function(){return e.props.setBoxState(Object(l.a)({},a,{isExercise:!1,editor:Object(l.a)({},a.editor,{placeholder:J.EVAL_MODE})}))}}),i.a.createElement("ul",{className:"UL"},function(e,t,a,n){for(var i=new Array(t-e+1),r=0,o=e;o<=t;++o)i[r++]=n(a[o],o);return i}(0,o.length-2,o,function(t,a){return i.a.createElement("li",{key:a.toString(),className:"inactiveStep LI"},i.a.createElement(k,{breakpoints:s,addBreakpoint:function(){},stepRecord:t,strategy:e.props.globalStrategy},i.a.createElement("i",{className:"hiddenIcon fas fa-pencil-alt",onClick:function(){return r(e.createBoxFrom(t))}})))}),i.a.createElement("li",{key:o.length-1,className:"activeStep LI"},i.a.createElement(k,{breakpoints:s,addBreakpoint:this.addBreakpoint,stepRecord:o[o.length-1],strategy:this.props.globalStrategy},i.a.createElement("i",{className:"hiddenIcon fas fa-pencil-alt",onClick:function(){return r(e.createBoxFrom(o[o.length-1]))}})))),i.a.createElement(I,{placeholder:f,content:p,caretPosition:d,syntaxError:E,isMarkDown:!1,onContent:this.onContent,onEnter:this.onEnter,onExecute:this.onExecute})):i.a.createElement("div",{className:b+" inactiveBox",onDoubleClick:this.props.makeActive},i.a.createElement("ul",{className:"UL"},i.a.createElement("li",{key:0,className:"activeStep LI"},i.a.createElement(k,{breakpoints:s,addBreakpoint:function(){},stepRecord:o[0],strategy:this.props.globalStrategy},i.a.createElement("i",{className:"hiddenIcon fas fa-pencil-alt",onClick:function(){return r(e.createBoxFrom(o[0]))}})))),i.a.createElement("p",{className:"inactiveMessage"},"Collapsing ",o.length-1," steps. Double click to activate this box."))}},{key:"createBoxFrom",value:function(e){var t=this.props.state,a=t.strategy,n=t.singleLetterNames,i=e.ast;return{type:D.EXPRESSION,__key:Date.now().toString(),expression:i.toString(),ast:i.clone(),history:[{ast:i.clone(),lastReduction:null,step:0,message:"",isNormalForm:!1}],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,isExercise:!1,strategy:a,singleLetterNames:n,editor:{placeholder:J.EVAL_MODE,content:"",caretPosition:0,syntaxError:null}}}},{key:"addBreakpoint",value:function(e){var t=this.props,a=t.state;(0,t.setBoxState)(Object(l.a)({},a,{breakpoints:[].concat(Object(c.a)(a.breakpoints),[e])}))}},{key:"onContent",value:function(e,t){var a=this.props,n=a.state;(0,a.setBoxState)(Object(l.a)({},n,{editor:Object(l.a)({},n.editor,{content:e,caretPosition:t,syntaxError:null})}))}},{key:"onEnter",value:function(){var e=this.props.state,t=e.expression,a=e.isExercise,n=e.editor.content;""===t?this.onSubmitExpression():""===n?a?this.onExerciseStep():this.onStep():console.log("TODO: deje se neco co si neosetril")}},{key:"onSubmitExpression",value:function(){var e=this.props,t=e.state,a=e.setBoxState,n=t.editor.content;try{var i=this.parseExpression(n);a(Object(l.a)({},t,{ast:i,expression:n,history:[{ast:i.clone(),lastReduction:v.None,step:0,message:"",isNormalForm:!1}],editor:{content:"",caretPosition:0,placeholder:J.EVAL_MODE,syntaxError:null}}))}catch(r){a(Object(l.a)({},t,{editor:Object(l.a)({},t.editor,{syntaxError:r.toString()})}))}}},{key:"onExerciseStep",value:function(){var e=this.props,t=e.state,a=e.setBoxState,n=t.strategy,i=t.history,r=t.editor.content;try{var o=this.parseExpression(r),s=i[i.length-1],m=s.isNormalForm,u=s.step,d=s.ast,p=s.lastReduction;if(d=d.clone(),m)return s.message="No more steps available. Expression is in normal form.",void a(Object(l.a)({},t));var f=new(A(n))(d);if(p=f.nextReduction,f.nextReduction instanceof v.None)return s.isNormalForm=!0,s.message="Expression is already in normal form.",void a(Object(l.a)({},t));d=f.perform();var E="";new C([o,d]).equals?(d=o,E="Correct."):(console.log("Incorrect step"),E="Incorrect step. ".concat(r)),a(Object(l.a)({},t,{history:[].concat(Object(c.a)(i),[{ast:d,lastReduction:p,step:u+1,message:E,isNormalForm:!1}]),editor:Object(l.a)({},t.editor,{content:"",caretPosition:0,placeholder:J.VALIDATE_MODE,syntaxError:null})}))}catch(b){}}},{key:"onStep",value:function(){var e=this.props,t=e.state,a=e.setBoxState,n=t.strategy,i=t.history,r=(t.editor.content,i[i.length-1]),o=r.isNormalForm,s=r.step,m=r.ast,u=r.lastReduction;if(m=m.clone(),!o){var d=new(A(n))(m);if(u=d.nextReduction,d.nextReduction instanceof v.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",void a(Object(l.a)({},t));m=d.perform(),a(Object(l.a)({},t,{history:[].concat(Object(c.a)(i),[{ast:m,lastReduction:u,step:s+1,message:"",isNormalForm:!1}])}))}}},{key:"onExecute",value:function(){var e=this.props,t=e.state,a=e.setBoxState,n=t.isRunning;if(!t.isExercise)if(n)this.onStop();else{var i=t.timeout,r=t.history,o=r[r.length-1];if(o.isNormalForm)return;var s=o.ast,c=o.step,m=o.lastReduction,u=o.isNormalForm;o.message;r.push(r[r.length-1]),r[r.length-2]={ast:s.clone(),step:c,lastReduction:m,message:"Skipping some steps...",isNormalForm:u},a(Object(l.a)({},t,{isRunning:!0,timeoutID:window.setTimeout(this.onRun,i)}))}}},{key:"onRun",value:function(){var e=this,t=this.props,a=t.state,n=t.setBoxState,i=a.strategy,r=a.history,o=a.isRunning,s=a.breakpoints,c=a.timeoutID,m=a.timeout,u=r[r.length-1],d=u.isNormalForm,p=u.step,f=u.lastReduction;if(o)if(d)n(Object(l.a)({},a,{isRunning:!1,timeoutID:void 0}));else{var E=u.ast,b=new(A(i))(E);if(f=b.nextReduction,b.nextReduction instanceof v.None)return r.pop(),r.push({ast:E,lastReduction:u.lastReduction,step:p,message:"Expression is in normal form.",isNormalForm:!0}),void n(Object(l.a)({},a,{isRunning:!1,timeoutID:void 0}));var h=s.find(function(t){return e.shouldBreak(t,b.nextReduction)});if(void 0!==h)return b.nextReduction instanceof v.Expansion&&h.broken.add(b.nextReduction.target),b.nextReduction instanceof v.Beta&&b.nextReduction.redex.left instanceof v.Lambda&&h.broken.add(b.nextReduction.redex.left.argument),window.clearTimeout(c),void n(Object(l.a)({},a,{isRunning:!1,timeoutID:c}));E=b.perform(),r[r.length-1]={ast:E,lastReduction:f,step:p+1,message:"",isNormalForm:d},n(Object(l.a)({},a,{timeoutID:window.setTimeout(this.onRun,m)}))}}},{key:"onStop",value:function(){var e=this.props,t=e.state,a=e.setBoxState,n=t.timeoutID;window.clearTimeout(n),a(Object(l.a)({},t,{isRunning:!1,timeoutID:void 0}))}},{key:"shouldBreak",value:function(e,t){return t instanceof e.type&&t instanceof v.Beta&&e.context instanceof v.Variable&&t.redex.left instanceof v.Lambda&&t.redex.left.argument.identifier===e.context.identifier&&!e.broken.has(t.redex.left.argument)||(t instanceof e.type&&t instanceof v.Expansion&&e.context instanceof v.ChurchNumeral&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target)||t instanceof e.type&&t instanceof v.Expansion&&e.context instanceof v.Macro&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target))}},{key:"parseExpression",value:function(e){var t=this.props.macroTable,a=this.props.state.singleLetterNames,n=Object(v.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:a});return Object(v.parse)(n,t)}}]),t}(n.PureComponent);function T(e){var t=e.state,a=e.setBoxState,n=e.defineMacro,r=t.macroName,o=t.macroExpression,s=t.singleLetterNames,c=t.editor,m=c.content,u=c.caretPosition,d=c.placeholder,p=c.syntaxError;return""===r&&""===o?i.a.createElement("div",{className:"box boxMacro inactiveBox"},i.a.createElement("p",{className:"emptyStep"},"Empty macro box."),i.a.createElement(I,{placeholder:d,content:m,caretPosition:u,syntaxError:p,isMarkDown:!1,onContent:function(t,n){a(Object(l.a)({},e.state,{editor:Object(l.a)({},e.state.editor,{content:t,caretPosition:n,syntaxError:null})}))},onEnter:function(){var e=m.split(":=").map(b),i=Object(B.a)(e,2),r=i[0],o=i[1];r in v.builtinMacros?a(Object(l.a)({},t,{editor:Object(l.a)({},t.editor,{syntaxError:new Error("Macro name is not valid. It redefines built-in Macro.")})})):function(e,t){try{var a=w(e,t);return a instanceof v.Variable}catch(n){return!1}}(r,s)?function(e,t){try{return w(e,t),!0}catch(a){return!1}}(o,s)?(a(Object(l.a)({},t,{macroName:r,macroExpression:o})),n(r,o)):a(Object(l.a)({},t,{editor:Object(l.a)({},t.editor,{syntaxError:new Error("Macro expression is not valid.")})})):a(Object(l.a)({},t,{editor:Object(l.a)({},t.editor,{syntaxError:new Error("Macro name is not valid.\n            ".concat(s&&1!==r.length?"Name should be single letter.":""))})}))},onExecute:function(){}})):i.a.createElement("div",{className:"box boxMacro"},r," := ",o)}function w(e,t){var a=t,n=Object(v.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:a});return Object(v.parse)(n,{})}a(187);var D,F=a(104);function P(e){var t=e.state,a=t.note,n=t.editor,r=n.placeholder,o=n.content,s=n.caretPosition,c=n.syntaxError,m=t.isEditing,u=e.isActive,d=e.setBoxState,p=e.makeActive,f=function(){d(Object(l.a)({},e.state,{note:o,isEditing:!1}))};return m&&u?i.a.createElement("div",{className:"box boxNoteEditor"},i.a.createElement("p",{className:"emptyStep"},"Empty note box."),i.a.createElement(I,{placeholder:r,content:o,caretPosition:s,syntaxError:c,isMarkDown:!0,onContent:function(t,a){d(Object(l.a)({},e.state,{editor:Object(l.a)({},e.state.editor,{content:t,caretPosition:a,syntaxError:null})}))},onEnter:f,onExecute:function(){}}),i.a.createElement("div",{id:"controls"},i.a.createElement("button",{onClick:function(){return f}},"Save"))):i.a.createElement("div",{className:"box boxNote markdown-body"},""===a?i.a.createElement("p",{className:"emptyStep"},"Empty note box."):null,i.a.createElement(F,{source:a}),i.a.createElement("div",{id:"controls"},i.a.createElement("button",{onClick:function(){d(Object(l.a)({},e.state,{isEditing:!0})),p()}},"Edit")))}function U(e){var t=e.state,a=e.isActive,n=e.macroTable,r=e.setBoxState,o=(e.makeActive,e.addBox),s=e.defineMacro,c=t.type;return c===D.EXPRESSION?i.a.createElement("div",{className:""},i.a.createElement(M,{state:t,globalStrategy:e.globalStrategy,isActive:a,macroTable:n,setBoxState:r,makeActive:e.makeActive,addBox:o})):c===D.MACRO?i.a.createElement("div",{className:""},i.a.createElement(T,{state:t,setBoxState:r,addBox:o,defineMacro:s})):c===D.NOTE?i.a.createElement("div",{className:""},i.a.createElement(P,{state:t,isActive:a,setBoxState:r,makeActive:e.makeActive,addBox:o})):null}!function(e){e[e.EXPRESSION=0]="EXPRESSION",e[e.MACRO=1]="MACRO",e[e.NOTE=2]="NOTE"}(D||(D={}));a(188);function _(e){var t=e.state,a=e.onImport,n=e.onScreenChange,r=t.screen,o=function(e){return Object(l.a)({},e,{submittedBoxes:e.submittedBoxes.map(Y)})}(t),s=function(e){var t=new Blob([e],{type:"application/json"});return window.URL.createObjectURL(t)}(JSON.stringify(o));return i.a.createElement("div",{id:"topbar"},i.a.createElement("div",null,r===q.main?i.a.createElement("i",{className:"icon fas fa-list-ul fa-2x",onClick:function(){return n(q.macrolist)}}):i.a.createElement("i",{className:"icon far fa-window-close fa-2x",onClick:function(){return n(q.main)}}),i.a.createElement("p",{className:"iconLabel"},"Macros")),i.a.createElement("div",null,i.a.createElement("a",{className:"export",href:s,download:"notebook_lambdulus.json",onClick:function(){return setTimeout(function(){return window.URL.revokeObjectURL(s)},10)}},i.a.createElement("i",{id:"download",className:"icon fas fa-cloud-download-alt fa-2x"})),i.a.createElement("p",{className:"iconLabel"},"Export")),i.a.createElement("div",null,i.a.createElement("input",{type:"file",accept:"application/json",id:"input",onChange:function(e){return function(e,t){var a=e.target.files;if(null===a)return;var n=a[0],i=new FileReader;i.onload=function(e){var a=JSON.parse(i.result);t(function(e){var t=e.macroTable;return Object(l.a)({},e,{submittedBoxes:e.submittedBoxes.map(function(e){return function(e,t){if(e.type===D.EXPRESSION){var a=e,n=a.singleLetterNames,i=function(e,t){var a=t.singleLetterNames,n=t.macroTable,i=Object(v.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:a});return Object(v.parse)(i,n)}(e.expression,{macroTable:t,singleLetterNames:n});return Object(l.a)({},e,{ast:i,history:[{ast:i,lastReduction:v.None,step:0,message:"",isNormalForm:!1}]})}return e}(e,t)})})}(a))},i.readAsText(n)}(e,a)}}),i.a.createElement("label",{htmlFor:"input"},i.a.createElement("i",{className:"icon fas fa-cloud-upload-alt fa-2x"})),i.a.createElement("p",{className:"iconLabel"},"Import")))}function Y(e){return e.type===D.EXPRESSION?Object(l.a)({},e,{ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0}):e}function V(e){var t=e.globalStrategy,a=e.singleLetterNames,n=e.submittedBoxes,r=e.activeBoxIndex,o=e.macroTable,s=e.setBoxState,c=e.makeActive,l=e.addBox,m=e.defineMacro,u=i.a.createElement("div",{className:"emptyC"},i.a.createElement("p",{className:"plusBtn inlineblock",onClick:function(){return e.addEmptyBox(function(e,t){return{type:D.EXPRESSION,__key:Date.now().toString(),expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,isExercise:!1,strategy:e,singleLetterNames:t,editor:{placeholder:J.INIT,content:"",caretPosition:0,syntaxError:null}}}(t,a))}},i.a.createElement("i",null,"+ \u03bb")),i.a.createElement("p",{className:"plusBtn inlineblock",onClick:function(){return e.addEmptyBox({type:D.MACRO,__key:Date.now().toString(),macroName:"",macroExpression:"",singleLetterNames:!0,editor:{placeholder:J.MACRO,content:"",caretPosition:0,syntaxError:null}})}},i.a.createElement("i",null,"+ Macro")),i.a.createElement("p",{className:"plusBtn inlineblock",onClick:function(){return e.addEmptyBox({type:D.NOTE,__key:Date.now().toString(),note:"",isEditing:!0,editor:{placeholder:J.NOTE,content:"",caretPosition:0,syntaxError:null}})}},i.a.createElement("i",null,"+ MD")));return 0===n.length?i.a.createElement("div",{className:"evaluatorSpace"},i.a.createElement("div",{className:"bigEmpty"},u)):i.a.createElement("div",{className:"evaluatorSpace"},i.a.createElement("ul",{className:"evaluatorList UL"},n.map(function(t,a){return i.a.createElement("li",{className:"LI",key:t.__key},i.a.createElement(U,{state:t,globalStrategy:e.globalStrategy,isActive:a===r,macroTable:o,setBoxState:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return s(a,e)}),makeActive:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return c(a)}),addBox:l,defineMacro:m}))}),i.a.createElement("div",{className:"smallEmpty"},u)))}function X(e){var t=e.macroTable,a=e.removeMacro;return i.a.createElement("div",{className:"macroSpace"},i.a.createElement("div",{className:"builtinMacros"},i.a.createElement("p",null,"Built-in Macros"),i.a.createElement("ul",{className:"UL"},Object.entries(v.builtinMacros).map(function(e){var t=Object(B.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{key:a},i.a.createElement("li",{className:"LI"},i.a.createElement("div",{className:"box boxMacro"},a," := ",n)))}))),i.a.createElement("div",{className:"userMacros"},i.a.createElement("p",null,"User-defined Macros"),i.a.createElement("ul",null,Object.entries(t).map(function(e){var t=Object(B.a)(e,2),n=t[0],r=t[1];return i.a.createElement("div",{key:n},i.a.createElement("li",{className:"LI"},i.a.createElement("div",{className:"box boxMacro"},n," := ",r,i.a.createElement("i",{className:"hiddenMacroIcon far fa-trash-alt",onClick:function(){return a(n)}}))))}))))}var K,q,J,z=a(41),G=z.Switch,H=z.Radio;!function(e){e.NORMAL="Normal Evaluation",e.APPLICATIVE="Applicative Evaluation",e.OPTIMISATION="Optimisation - \u03b7 Conversion"}(K||(K={})),function(e){e[e.main=0]="main",e[e.macrolist=1]="macrolist"}(q||(q={})),function(e){e.INIT="Type \u03bb expression and hit enter",e.EVAL_MODE="Hit enter for next step",e.VALIDATE_MODE="Write next step and hit enter for validation",e.MACRO="Define Macro like: `NAME := [\u03bb expression]` and hit enter",e.NOTE="Type note and hit shift enter"}(J||(J={}));var Q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setBoxState=a.setBoxState.bind(Object(E.a)(Object(E.a)(a))),a.addEmptyBox=a.addEmptyBox.bind(Object(E.a)(Object(E.a)(a))),a.changeActiveBox=a.changeActiveBox.bind(Object(E.a)(Object(E.a)(a))),a.changeActiveStrategy=a.changeActiveStrategy.bind(Object(E.a)(Object(E.a)(a))),a.changeActiveSingleLetterNames=a.changeActiveSingleLetterNames.bind(Object(E.a)(Object(E.a)(a))),a.getActiveStrategy=a.getActiveStrategy.bind(Object(E.a)(Object(E.a)(a))),a.getActiveSingleLetterNames=a.getActiveSingleLetterNames.bind(Object(E.a)(Object(E.a)(a))),a.addBox=a.addBox.bind(Object(E.a)(Object(E.a)(a))),a.removeMacro=a.removeMacro.bind(Object(E.a)(Object(E.a)(a))),a.updateMacros=a.updateMacros.bind(Object(E.a)(Object(E.a)(a))),a.defineMacro=a.defineMacro.bind(Object(E.a)(Object(E.a)(a))),a.state={macroTable:Object(l.a)({},h,JSON.parse(window.localStorage.getItem("macrotable")||"{}")),submittedBoxes:[],screen:q.main,activeBoxIndex:-1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.macroTable,n=t.submittedBoxes,r=t.screen,o=t.activeBoxIndex;return i.a.createElement("div",{className:"app"},i.a.createElement(_,{state:this.state,onImport:function(t){return e.setState(t)},onScreenChange:function(t){return e.setState(Object(l.a)({},e.state,{screen:t}))}}),i.a.createElement("div",{className:"editorSettings"},i.a.createElement(G,{checked:this.getActiveSingleLetterNames(),disabled:!1,shape:"fill",onChange:function(t){return e.changeActiveSingleLetterNames(t.target.checked)}},"Single Letter Names"),i.a.createElement("div",{className:"strategies inlineblock"},i.a.createElement("p",{className:"stratsLabel inlineblock"},"Evaluation Strategies:"),i.a.createElement(H,{name:"strategy",style:"fill",checked:this.getActiveStrategy()===K.NORMAL,onChange:function(){return e.changeActiveStrategy(K.NORMAL)}},"Normal"),i.a.createElement(H,{style:"fill",name:"strategy",checked:this.getActiveStrategy()===K.APPLICATIVE,onChange:function(){return e.changeActiveStrategy(K.APPLICATIVE)}},"Applicative"))),r===q.main?i.a.createElement(V,{submittedBoxes:n,activeBoxIndex:o,globalStrategy:e.getActiveStrategy(),singleLetterNames:e.getActiveSingleLetterNames(),macroTable:a,makeActive:e.changeActiveBox,setBoxState:e.setBoxState,addEmptyBox:e.addEmptyBox,addBox:e.addBox,defineMacro:e.defineMacro}):i.a.createElement(X,{macroTable:a,removeMacro:e.removeMacro}))}},{key:"setBoxState",value:function(e,t){var a=this.state.submittedBoxes;a[e]=t,this.setState(Object(l.a)({},this.state,{submittedBoxes:a}))}},{key:"addEmptyBox",value:function(e){var t=this.state,a=t.submittedBoxes;t.activeBoxIndex;this.setState(Object(l.a)({},this.state,{submittedBoxes:[].concat(Object(c.a)(a),[e]),activeBoxIndex:Math.max(0,a.length)}))}},{key:"addBox",value:function(e){var t=this.state,a=t.submittedBoxes;t.activeBoxIndex;this.setState(Object(l.a)({},this.state,{submittedBoxes:[].concat(Object(c.a)(a),[e]),activeBoxIndex:a.length}))}},{key:"changeActiveBox",value:function(e){this.setState(Object(l.a)({},this.state,{activeBoxIndex:e}))}},{key:"getActiveStrategy",value:function(){var e=this.state,t=e.submittedBoxes,a=e.activeBoxIndex;if(-1===a)return K.NORMAL;var n=t[a];return n.type!==D.EXPRESSION?K.NORMAL:n.strategy}},{key:"getActiveSingleLetterNames",value:function(){var e=this.state,t=e.submittedBoxes,a=e.activeBoxIndex;if(-1===a)return!0;var n=t[a];return n.type===D.NOTE||(n.type===D.EXPRESSION?n.singleLetterNames:n.type!==D.MACRO||n.singleLetterNames)}},{key:"changeActiveStrategy",value:function(e){var t=this.state,a=t.submittedBoxes,n=t.activeBoxIndex;a[n]=Object(l.a)({},a[n],{strategy:e}),this.setState(Object(l.a)({},this.state))}},{key:"changeActiveSingleLetterNames",value:function(e){var t=this.state,a=t.submittedBoxes,n=t.activeBoxIndex;a[n]=Object(l.a)({},a[n],{singleLetterNames:e}),this.setState(Object(l.a)({},this.state))}},{key:"removeMacro",value:function(e){var t=this.state.macroTable,a=Object(l.a)({},t);delete a[e],this.setState(Object(l.a)({},this.state,{macroTable:a})),this.updateMacros(a)}},{key:"updateMacros",value:function(e){window.localStorage.setItem("macrotable",JSON.stringify(e))}},{key:"defineMacro",value:function(e,t){var a=this.state.macroTable;this.setState(Object(l.a)({},this.state,{macroTable:Object(l.a)({},a,Object(s.a)({},e,t))})),this.updateMacros(Object(l.a)({},a,Object(s.a)({},e,t)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,t,a){e.exports=a(189)},63:function(e,t,a){},64:function(e,t,a){},99:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.41577b53.chunk.js.map