(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(73)},34:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(26),r=n.n(s),o=(n(34),n(16)),c=n(3),l=n(27),u=n(19),f=n(15),d=n(21),p=n(20),m=n(22),v=n(4),E=n(1);n(67),n(68);function b(e){var t=e.expression,n=e.caretPosition,a=e.onExpression,s=e.onSubmit,r=e.syntaxError,o=Math.min(t.split("\n").length,t.length);return i.a.createElement("div",{className:"editor"},r?"".concat(r):"",i.a.createElement("i",{id:"editorEnter",className:"far fa-play-circle fa-3x",onClick:s}),i.a.createElement(h,{expression:t,lines:o,caretPosition:n,onChange:function(e){var t=e.target.value,n=e.target.selectionEnd;t=t.replace(/\\/g,"\u03bb"),a(t,n)},onKeyDown:function(e){e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),s())}}))}function h(e){var t=e.expression,n=e.lines,a=e.onChange,s=e.onKeyDown,r=e.caretPosition;return i.a.createElement("textarea",{className:"prompt",onKeyDown:s,onChange:a,value:t,placeholder:"(\u03bb f . (\u03bb x . f (x x)) (\u03bb x . f (x x)))",wrap:"hard",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,rows:Math.max(n,1),ref:function(e){null!==e&&(e.selectionStart=r,e.selectionEnd=r)}})}n(69),n(70);function x(e){var t=e.onRun,n=e.onStop,a=e.onStep,s=e.onClear,r=e.isRunning;return i.a.createElement("div",{id:"controls"},r?i.a.createElement("i",{className:"enabled fas fa-pause fa-2x",onClick:n}):i.a.createElement("i",{className:"enabled fas fa-forward fa-2x",onClick:t}),r?i.a.createElement("i",{className:"disabled fas fa-play fa-2x",onClick:function(){}}):i.a.createElement("i",{className:"enabled fas fa-play fa-2x",onClick:a}),r?i.a.createElement("i",{className:"disabled fas fa-redo-alt fa-2x",onClick:function(){}}):i.a.createElement("i",{className:"enabled fas fa-redo-alt fa-2x",onClick:s}))}n(71);var N=function(e){function t(e,n,a){var i;return Object(u.a)(this,t),(i=Object(d.a)(this,Object(p.a)(t).call(this))).tree=e,i.onClick=n,i.redex=a,i.rendered=null,i.tree.visit(Object(v.a)(Object(v.a)(i))),i}return Object(m.a)(t,e),Object(f.a)(t,[{key:"printMultiLambda",value:function(e,t){var n=this;if(e.body instanceof E.Lambda){var a=e.body.argument,s=i.a.createElement("span",{className:"arguments"},t," "," ",i.a.createElement("span",{className:"argument",onClick:function(){return n.onClick({type:E.Beta,context:a})}},e.body.argument.name()));this.printMultiLambda(e.body,s)}else{e.body.visit(this);var r=this.rendered;this.rendered=t,this.rendered=i.a.createElement("span",{className:"function"},"(",i.a.createElement("span",{className:"lambda",onClick:function(){n.onClick({type:E.Beta,context:e})}},"\u03bb "," "),t," . ",r,")")}}}]),Object(f.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t="left",n="right";if(null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(t+=" redex",n+=" redex"),e.right instanceof E.Application){e.left.visit(this);var a=i.a.createElement("span",{className:t},this.rendered);e.right.visit(this);var s=i.a.createElement("span",{className:n},"( ",this.rendered," )");this.rendered=i.a.createElement("span",{className:"application"},a," ",s)}else{e.left.visit(this);var r=i.a.createElement("span",{className:t},this.rendered);e.right.visit(this);var o=i.a.createElement("span",{className:n},this.rendered);this.rendered=i.a.createElement("span",{className:"application"},r," ",o)}}},{key:"onLambda",value:function(e){var t=this;if(e.body instanceof E.Lambda){var n=e.body.argument,a=i.a.createElement("span",{className:"argument",onClick:function(){return t.onClick({type:E.Beta,context:n})}},e.argument.name());this.printMultiLambda(e,a)}else{var s=e.argument;e.argument.visit(this);var r=this.rendered;e.body.visit(this);var o=this.rendered;this.rendered=i.a.createElement("span",{className:"function"},"(",i.a.createElement("span",{className:"lambda",onClick:function(){t.onClick({type:E.Beta,context:e})}},"\u03bb "," "),i.a.createElement("span",{className:"argument",onClick:function(){return t.onClick({type:E.Beta,context:s})}},r," "," "),". ",o,")")}}},{key:"onChurchNumber",value:function(e){var t=this,n="churchnumeral";null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(n+=" redex"),this.rendered=i.a.createElement("span",{className:n,onClick:function(){return t.onClick({type:E.Expansion,context:e})}},e.name())}},{key:"onMacro",value:function(e){var t=this,n="macro";null!==this.redex&&this.redex.identifier===e.identifier&&this.redex===e&&(n+=" redex"),this.rendered=i.a.createElement("span",{className:n,onClick:function(){return t.onClick({type:E.Expansion,context:e})}},e.name())}},{key:"onVariable",value:function(e){this.rendered=i.a.createElement("span",{className:"variable"},e.name())}}]),t}(E.ASTVisitor);function S(e){var t=e.tree,n=e.addBreakpoint;if(null===t)return null;var a=null,s=new E.NormalEvaluator(t);s.nextReduction instanceof E.Beta&&(a=s.nextReduction.redex),s.nextReduction instanceof E.Expansion&&(a=s.nextReduction.target);var r=new N(t,n,a);return i.a.createElement("span",{className:"step"},r.print())}var O=i.a.memo(function(e){var t=e.history,n=(e.steps,e.isRunning);e.lastReduction,e.breakpoints,e.timeoutID,e.updateState;return i.a.createElement("div",{className:"evaluator"},i.a.createElement(x,{onRun:function(){return function(e){var t=e.lastReduction,n=e.updateState,a=e.timeout;if(t instanceof E.None)return;n(Object(c.a)({},e,{isRunning:!0,timeoutID:window.setTimeout(function(){return function e(t){var n=t.history,a=t.steps,i=t.lastReduction,s=t.isRunning,r=t.breakpoints,o=t.updateState,l=t.timeout;if(!s)return;if(i instanceof E.None)return void o(Object(c.a)({},t,{isRunning:!1,timeoutID:void 0}));var u=n[n.length-1].clone();var f=new E.NormalEvaluator(u);i=f.nextReduction;if(f.nextReduction instanceof E.None)return n=[u],void o(Object(c.a)({},t,{history:n,steps:a,lastReduction:i,isRunning:!1,timeoutID:void 0}));var d=0;var p=r.find(function(e,t){return d=t,function(e,t){if(t instanceof e.type&&t instanceof E.Beta&&e.context instanceof E.Lambda&&t.target.identifier===e.context.body.identifier)return!0;if(t instanceof e.type&&t instanceof E.Beta&&e.context instanceof E.Variable&&t.redex.left instanceof E.Lambda&&t.redex.left.argument.identifier===e.context.identifier)return!0;if(t instanceof e.type&&t instanceof E.Expansion&&e.context instanceof E.ChurchNumber&&t.target.identifier===e.context.identifier)return!0;if(t instanceof e.type&&t instanceof E.Expansion&&e.context instanceof E.Macro&&t.target.identifier===e.context.identifier)return!0;return!1}(e,f.nextReduction)});if(void 0!==p)return r.splice(d,1),void o(Object(c.a)({},t,{isRunning:!1,breakpoints:r,timeoutID:void 0}));u=f.perform();a++;o(Object(c.a)({},t,{history:[u],steps:a,lastReduction:i,timeoutID:window.setTimeout(function(){return e(Object(c.a)({},t,{history:[u],steps:a,lastReduction:i}))},l)}))}(Object(c.a)({},e,{isRunning:!0}))},a)}))}(e)},onStop:function(){return function(e){var t=e.updateState,n=e.timeoutID;window.clearTimeout(n),t(Object(c.a)({},e,{isRunning:!1,timeoutID:void 0}))}(e)},onStep:function(){return function(e){var t=e.history,n=e.steps,a=e.lastReduction,i=e.updateState;if(a instanceof E.None)return;var s=t[t.length-1].clone(),r=new E.NormalEvaluator(s);if(a=r.nextReduction,r.nextReduction instanceof E.None)return void i(Object(c.a)({},e,{lastReduction:a}));s=r.perform(),n++,i(Object(c.a)({},e,{history:[].concat(Object(o.a)(t),[s]),steps:n,lastReduction:a}))}(e)},onClear:function(){return function(e){(0,e.updateState)(Object(c.a)({},e,{history:[e.ast],steps:0,isRunning:!1,lastReduction:null,breakpoints:[]}))}(e)},isRunning:n}),i.a.createElement("ul",null,i.a.createElement("li",{key:t.length-1,className:"activeStep"},i.a.createElement(S,{addBreakpoint:function(t){return function(e,t){(0,e.updateState)(Object(c.a)({},e,{breakpoints:[].concat(Object(o.a)(e.breakpoints),[t])}))}(e,t)},tree:t[t.length-1]})),function(e,t,n,a){for(var i=new Array(t-e+1),s=0,r=t;r>=e;--r)i[s++]=a(n[r],r);return i}(0,t.length-2,t,function(e,t){return i.a.createElement("li",{key:t,className:"inactiveStep"},i.a.createElement(S,{addBreakpoint:function(){},tree:e}))})))},function(e,t){return e.isRunning===t.isRunning&&e.steps===t.steps&&e.timeout===t.timeout});n(72);function R(e){var t=e.state,n=e.onImport,a=function(e){return Object(c.a)({},e,{submittedExpressions:e.submittedExpressions.map(function(e){return Object(c.a)({},e,{ast:null,history:[],isRunning:!1,lastReduction:null,breakpoints:[],timeoutID:void 0})})})}(t),s=function(e){var t=new Blob([e],{type:"application/json"});return window.URL.createObjectURL(t)}(JSON.stringify(a));return i.a.createElement("div",{id:"topbar"},i.a.createElement("i",{className:"icon fas fa-bars fa-2x"}),i.a.createElement("i",{className:"save icon fas fa-save fa-2x"}),i.a.createElement("a",{className:"export icon",href:s,download:"notebook_lambdulus.json",onClick:function(){return setTimeout(function(){return window.URL.revokeObjectURL(s)},10)}},i.a.createElement("i",{id:"download",className:"fas fa-cloud-download-alt fa-2x"})),i.a.createElement("input",{type:"file",accept:"application/json",id:"input",onChange:function(e){return function(e,t){var n=e.target.files;if(null===n)return;var a=n[0],i=new FileReader;i.onload=function(e){var n,a=JSON.parse(i.result);t((n=a,Object(c.a)({},n,{submittedExpressions:n.submittedExpressions.map(function(e){var t=function(e,t){var n=t.singleLetterVars,a=t.macroTable,i=Object(E.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n});return Object(E.parse)(i,a)}(e.expression,n);return Object(c.a)({},e,{ast:t,history:[t]})})})))},i.readAsText(a)}(e,n)}}),i.a.createElement("label",{htmlFor:"input"},"Import notebook"))}var g={FACT:"(Y (\u03bb f n . (<= n 1) 1 (* n (f (- n 1)))))",FACCT:"(\u03bb n . (Y (\u03bb f n a . IF (= n 1) a (f (- n 1) (* n a)))) (- n 1) (n))",FIB:"(Y (\u03bb f n . (= n 0) 0 ((= n 1) 1 ( + (f (- n 1)) (f (- n 2))))))",APPEND:"Y (\u03bb fn listA listB . IF (NULL listA) (listB) (CONS (FIRST listA) (fn (SECOND listA) listB)))",LISTGREQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (>= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTLESS:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (< (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTGR:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (> (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",LISTEQ:"Y (\u03bb fn piv list . IF (NULL list) (NIL) ( IF (= (FIRST list) piv) (CONS (FIRST list) (fn piv (SECOND list))) (fn piv (SECOND list)) ) )",QUICKSORT:"Y (\u03bb fn list . IF (NULL list) (NIL) ( IF (NULL (SECOND list)) (list) ( APPEND (fn (LISTLESS (FIRST list) list)) ( APPEND (LISTEQ (FIRST list) list) (fn (LISTGR (FIRST list) list)) ) ) ) )",INFLIST:"(\u03bb n . (Y (\u03bb x . (\u03bb f s g . g f s) n x)))",REMOVENTH:"Y (\u03bb fn list n . IF (= n 0) (SECOND list) (IF (NULL list) NIL (CONS (FIRST list) (fn (SECOND list) (- n 1) ) ) ) )",NTH:"Y (\u03bb fn list n . IF (= n 0) (FIRST list) (IF (NULL (list)) NIL (fn (SECOND list) (- n 1)) ) )",LEN:"Y (\u03bb fn list . IF (NULL list) (0) (+ 1 (fn (SECOND list) )) )",GETNTH:"(\u03bb end . (Y (\u03bb f n i . (end i) (i) ( (= n 0) (Y (\u03bb f a . (end a) (i) (f) ) ) (f (- n 1)) ) )) )",MAP:"(\u03bb fn l . (Y (\u03bb f it . IF (NULL it) (NIL) (CONS (fn (FIRST it)) (f (SECOND it))) )) l )",REDUCE:"(\u03bb fn l init . Y (\u03bb f it acc . IF (NULL it) (acc) (f (SECOND it) (fn (FIRST it) acc)) ) l init )",APPLY:"(\u03bb f args . Y (\u03bb ff f l . (NULL l) (f) (ff (f (FIRST l)) (SECOND l)) ) f args )",RANGE:"(\u03bb m n . Y (\u03bb f e . (= e n) (CONS e NIL) (CONS e (f (+ e 1))) ) m )",LISTCOMPR:"(\u03bb args . APPLY (\u03bb op in rng cond . Y (\u03bb f l . (NULL l) (NIL) ( (cond (FIRST l)) (CONS (op (FIRST l)) (f (SECOND l))) (CONS (FIRST l) (f (SECOND l))) ) ) rng ) args )",MOD:"(\u03bb n m . (n (\u03bb n . (= n (- m 1)) (0) (+ n 1)) (0)) )",INFIX:"APPLY (\u03bb l op r . op l r)"},L=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).parseExpression=n.parseExpression.bind(Object(v.a)(Object(v.a)(n))),n.getSavedMacros=n.getSavedMacros.bind(Object(v.a)(Object(v.a)(n))),n.getExpressionFromURL=n.getExpressionFromURL.bind(Object(v.a)(Object(v.a)(n))),n.updateFromURL=n.updateFromURL.bind(Object(v.a)(Object(v.a)(n)));var a=function(e,t){var n;return[function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout(function(){e.apply(void 0,i)},t)},function(){window.clearTimeout(n)}]}(n.updateURL.bind(Object(v.a)(Object(v.a)(n))),500),i=Object(l.a)(a,2),s=i[0],r=i[1];n.updateURL=s,n.cancelUpdate=r,n.onExpression=n.onExpression.bind(Object(v.a)(Object(v.a)(n))),n.onSubmit=n.onSubmit.bind(Object(v.a)(Object(v.a)(n))),n.onRemoveExpression=n.onRemoveExpression.bind(Object(v.a)(Object(v.a)(n))),window.addEventListener("hashchange",n.updateFromURL);var o=n.getExpressionFromURL();return n.state={editorState:{expression:o,caretPosition:o.length,syntaxError:null},singleLetterVars:!1,macroTable:Object(c.a)({},g,n.getSavedMacros()),submittedExpressions:[]},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.editorState,a=n.expression,s=n.caretPosition,r=n.syntaxError,o=(t.singleLetterVars,t.macroTable,t.submittedExpressions);return i.a.createElement("div",{className:"app"},i.a.createElement(R,{state:this.state,onImport:function(t){return e.setState(t)}}),i.a.createElement("ul",{className:"evaluatorSpace"},o.map(function(t,n){return i.a.createElement("li",{key:t.__key},i.a.createElement("div",{className:"evaluationHeader"},i.a.createElement("i",{className:"far fa-trash-alt fa-lg",onClick:function(){return e.onRemoveExpression(n)}}),i.a.createElement("i",{className:"fas fa-pencil-alt fa-lg"}),i.a.createElement("p",null,"New Expression: ",t.expression)),i.a.createElement(O,Object.assign({},t,{updateState:function(t){return e.onUpdateEvaluationState(t,n)}})))})),i.a.createElement(b,{expression:a,caretPosition:s,onExpression:this.onExpression,onSubmit:this.onSubmit,syntaxError:r}),i.a.createElement("div",{id:"anchor"}))}},{key:"updateURL",value:function(e){history.pushState({},"page title?","#"+encodeURI(e))}},{key:"cancelUpdate",value:function(){}},{key:"onExpression",value:function(e,t){this.setState(Object(c.a)({},this.state,{editorState:{expression:e,caretPosition:t,syntaxError:null}})),this.updateURL(e)}},{key:"onUpdateEvaluationState",value:function(e,t){var n=this.state.submittedExpressions;n[t]=e,this.setState(Object(c.a)({},this.state,{submittedExpressions:n}))}},{key:"onRemoveExpression",value:function(e){console.log(e);var t=this.state.submittedExpressions;t.splice(e,1),this.setState(Object(c.a)({},this.state,{submittedExpressions:t}))}},{key:"onSubmit",value:function(){this.cancelUpdate();var e=this.state,t=e.editorState,n=t.expression,a=t.caretPosition,i=e.submittedExpressions;history.pushState({},"","#"+encodeURI(n));try{var s=this.parseExpression(n);history.pushState({},"","#"+encodeURI(""));var r={__key:Date.now().toString(),expression:n,ast:s,history:[s],steps:0,isRunning:!1,lastReduction:null,breakpoints:[],timeoutID:void 0,timeout:10};this.setState(Object(c.a)({},this.state,{editorState:{expression:"",caretPosition:0,syntaxError:null},submittedExpressions:[].concat(Object(o.a)(i),[r])}))}catch(l){this.updateURL(n),console.log(l),this.setState(Object(c.a)({},this.state,{editorState:{expression:n,caretPosition:a,syntaxError:l}}))}}},{key:"getExpressionFromURL",value:function(){return decodeURI(window.location.hash.substring(1))}},{key:"updateFromURL",value:function(){var e=this.state.editorState.expression,t=this.getExpressionFromURL();e!==t?this.setState(Object(c.a)({},this.state,{editorState:{expression:t,caretPosition:t.length,syntaxError:null}})):console.log("ALREADY SYNCED")}},{key:"parseExpression",value:function(e){var t=this.state,n=t.singleLetterVars,a=t.macroTable,i=Object(E.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n});return Object(E.parse)(i,a)}},{key:"getSavedMacros",value:function(){return JSON.parse(window.localStorage.getItem("macrotable")||"{}")}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.174c4130.chunk.js.map