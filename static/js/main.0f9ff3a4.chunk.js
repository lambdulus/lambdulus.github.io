(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(65)},33:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),s=a.n(i),o=(a(33),a(19)),c=a(5),l=a(14),u=a(12),d=a(16),p=a(15),b=a(17),h=a(1),m=a(3),v={width:"100%",fontSize:"3em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none"};function f(e){var t=e.content,a=e.lines,n=e.onChange,i=e.caretPosition;return r.a.createElement("textarea",{style:v,onChange:n,value:t,placeholder:"(\u03bb f . (\u03bb x . f (x x)) (\u03bb x . f (x x)))",wrap:"hard",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,rows:Math.max(a+1,2),ref:function(e){null!==e&&(e.selectionStart=i,e.selectionEnd=i)}})}var g={fontSize:"1.5em",background:"none",borderStyle:"none",borderBottom:"2px solid navy",marginLeft:"5px",marginRight:"5px",cursor:"pointer",outline:"none"};function y(e){var t=e.run,a=e.step,n=e.clear,i=(e.stepIn,e.stepBack,e.canRun),s=e.canStepOver;e.canStepIn,e.canGoBack;return r.a.createElement("div",null,r.a.createElement("button",{style:g,onClick:t,disabled:!i},"RUN"),r.a.createElement("button",{style:g,onClick:a,disabled:!s},"STEP"),r.a.createElement("button",{style:g,onClick:n,disabled:!1},"CLEAR"))}var O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).tree=e,a.rendered=null,a.tree.visit(Object(h.a)(Object(h.a)(a))),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"printLambdaBody",value:function(e){e.body instanceof m.Lambda?this.printLambdaBody(e.body):e.body.visit(this)}},{key:"printLambdaArguments",value:function(e,t){if(e.body instanceof m.Lambda){var a=r.a.createElement("span",null,t," ",e.body.argument.name());this.printLambdaArguments(e.body,a)}else this.rendered=t}}]),Object(u.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){if(e.right instanceof m.Application){e.left.visit(this);var t=this.rendered;e.right.visit(this);var a=this.rendered;this.rendered=r.a.createElement("span",null,t," ( ",a," )")}else{e.left.visit(this);var n=this.rendered;e.right.visit(this);var i=this.rendered;this.rendered=r.a.createElement("span",null,n," ",i)}}},{key:"onLambda",value:function(e){if(e.body instanceof m.Lambda){this.printLambdaArguments(e,r.a.createElement("span",null,e.argument.name()));var t=this.rendered;this.printLambdaBody(e);var a=this.rendered;this.rendered=r.a.createElement("span",null,"(\u03bb ",t," . ",a," )")}else{e.argument.visit(this);var n=this.rendered;e.body.visit(this);var i=this.rendered;this.rendered=r.a.createElement("span",null,"(\u03bb ",n," . ",i," )")}}},{key:"onChurchNumber",value:function(e){this.rendered=r.a.createElement("span",null,e.name())}},{key:"onMacro",value:function(e){this.rendered=r.a.createElement("span",null,e.name())}},{key:"onVariable",value:function(e){this.rendered=r.a.createElement("span",null,e.name())}}]),t}(m.ASTVisitor),E={fontSize:"2em",wordWrap:"anywhere"};function j(e){var t=e.tree;if(null===t)return null;var a=new O(t);return r.a.createElement("span",{style:E},a.print())}var x=a(20);function k(e){return e.trim()}var S={padding:"0"},w={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingLeft:"10px",paddingRight:"10px",border:"1px solid gray",listStyle:"none",margin:"10px",borderRadius:"20px",color:"gray",cursor:"pointer"},C={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"10px",paddingRight:"10px",border:"2px solid black",listStyle:"none",margin:"10px",borderRadius:"20px",color:"black",cursor:"pointer"},M={width:"100%",fontSize:"2em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none",borderBottom:"none"},L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.listMacros=a.listMacros.bind(Object(h.a)(Object(h.a)(a))),a.onAdd=a.onAdd.bind(Object(h.a)(Object(h.a)(a))),a.isValidExpression=a.isValidExpression.bind(Object(h.a)(Object(h.a)(a))),a.state={value:"",invalidMacro:!1},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"1.3em"}},"Built-in Macros:"),r.a.createElement("ul",{style:S},Object.entries(m.builtinMacros).map(function(e){var t=Object(x.a)(e,2),a=t[0];t[1];return r.a.createElement("li",{title:"Built-in Macro",style:w,key:a},a)})),r.a.createElement("span",{style:{fontSize:"1.3em"}},"User defined Macros:"),this.listMacros(),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.onAdd},r.a.createElement("input",{disabled:this.props.disabled,value:this.state.value,onChange:this.onChange,placeholder:"T := (\u03bb t f . t)",style:this.state.invalidMacro?Object(c.a)({},M,{borderBottom:"2px solid #EF3D59"}):M,autoFocus:!0,type:"text"})))}},{key:"onChange",value:function(e){var t=e.target.value;t=t.replace(/\\/g,"\u03bb"),this.setState(Object(c.a)({},this.state,{value:t,invalidMacro:!1}))}},{key:"onAdd",value:function(e){e.preventDefault();var t=this.state.value.split(":=").map(k),a=Object(x.a)(t,2),n=a[0],r=a[1];r&&this.isValidExpression(r)?(this.props.addMacro(n,r),this.setState(Object(c.a)({},this.state,{value:""}))):this.setState(Object(c.a)({},this.state,{invalidMacro:!0}))}},{key:"listMacros",value:function(){var e=this,t=this.props.macros;return r.a.createElement("ul",{style:S},Object.entries(t).map(function(t){var a=Object(x.a)(t,2),n=a[0],i=a[1];return r.a.createElement("li",{key:n,title:"Click to delete Macro",style:C,onClick:function(){return e.props.removeMacro(n)}},n," := ",i)}))}},{key:"isValidExpression",value:function(e){try{var t=Object(m.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:!1});return Object(m.parse)(t,this.props.macros),!0}catch(a){return!1}}}]),t}(n.Component),R={margin:"auto",marginTop:"5vh",width:"80%",borderBottom:"2px solid gray",padding:"10px"},B={margin:"auto",width:"80%",marginTop:"2vh"},A={position:"fixed",top:"0",width:"100%",height:"80%",borderBottom:"2px solid gray",backgroundColor:"white"},F={margin:"10px"},z={border:"none",background:"transparent",fontSize:"1.5em",cursor:"pointer"},T={padding:"0"},I={listStyle:"none",marginBottom:"20px"},N=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).run=a.run.bind(Object(h.a)(Object(h.a)(a))),a.step=a.step.bind(Object(h.a)(Object(h.a)(a))),a.stepIn=a.stepIn.bind(Object(h.a)(Object(h.a)(a))),a.stepBack=a.stepBack.bind(Object(h.a)(Object(h.a)(a))),a.parseExpression=a.parseExpression.bind(Object(h.a)(Object(h.a)(a))),a.onExpressionChange=a.onExpressionChange.bind(Object(h.a)(Object(h.a)(a))),a.autoSave=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];window.clearTimeout(a),a=window.setTimeout(function(){e.apply(void 0,r)},t)}}(a.autoSave.bind(Object(h.a)(Object(h.a)(a))),500),a.getExpressionFromURL=a.getExpressionFromURL.bind(Object(h.a)(Object(h.a)(a))),a.updateFromURL=a.updateFromURL.bind(Object(h.a)(Object(h.a)(a))),a.addMacro=a.addMacro.bind(Object(h.a)(Object(h.a)(a))),a.removeMacro=a.removeMacro.bind(Object(h.a)(Object(h.a)(a))),a.getMacrosFromLocalStorage=a.getMacrosFromLocalStorage.bind(Object(h.a)(Object(h.a)(a))),a.clear=a.clear.bind(Object(h.a)(Object(h.a)(a))),window.addEventListener("hashchange",a.updateFromURL);var n=a.getExpressionFromURL(),r=n.split("\n").length;return a.state={expression:n,lines:r,caretPosition:n.length,ast:null,steps:0,previousReduction:null,autoCloseParenthesis:!1,macroTable:a.getMacrosFromLocalStorage(),menuOpen:!1,steping:!1,briefHistory:[]},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(c.a)({},this.state,{ast:this.parseExpression(this.state.expression)}))}},{key:"render",value:function(){var e=this,t={run:this.run,step:this.step,clear:this.clear,stepIn:this.stepIn,stepBack:this.stepBack,canRun:!0,canStepOver:!0,canStepIn:!0,canGoBack:!0},a=this.state,n=(a.ast,a.steps),i=a.expression,s=a.lines,o=a.caretPosition;return r.a.createElement("div",{className:"App"},this.state.menuOpen?r.a.createElement("div",{style:A},r.a.createElement("button",{title:"Close Menu",style:z,onClick:function(){e.setState(Object(c.a)({},e.state,{menuOpen:!1}))}},")("),r.a.createElement("div",{style:F},r.a.createElement("span",{style:{fontSize:"1.3em"}},"Autocomplete parethesis"),r.a.createElement("input",{type:"checkbox",checked:this.state.autoCloseParenthesis,onChange:function(t){return e.setState(Object(c.a)({},e.state,{autoCloseParenthesis:!e.state.autoCloseParenthesis}))}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(L,{disabled:this.state.steping,macros:this.state.macroTable,addMacro:this.addMacro,removeMacro:this.removeMacro}))):r.a.createElement("button",{title:"Open Menu",style:z,onClick:function(){e.setState(Object(c.a)({},e.state,{menuOpen:!0}))}},"()"),r.a.createElement("div",{style:R},r.a.createElement(f,{content:i,lines:s,caretPosition:o,onChange:this.onExpressionChange}),r.a.createElement("br",null),r.a.createElement(y,t),r.a.createElement("br",null),"Steps: ",n,r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{style:B},r.a.createElement("ul",{style:T},this.state.briefHistory.map(function(e,t){return r.a.createElement("li",{key:t,style:0!==t?Object(c.a)({},I,{color:"gray"}):I},r.a.createElement(j,{tree:e}))}))))}},{key:"run",value:function(){var e=this.state,t=e.ast,a=e.expression,n=e.steps,r=e.previousReduction,i=e.briefHistory;if(0===n&&(t=this.parseExpression(a)),!(null===t||r instanceof m.None)){for(;;){var s=new m.NormalEvaluator(t);if(r=s.nextReduction,s.nextReduction instanceof m.None)break;t=s.perform(),n++}i=[t.clone()],this.setState(Object(c.a)({},this.state,{ast:t,steps:n,previousReduction:r,steping:!1,briefHistory:i}))}}},{key:"step",value:function(){var e=this.state,t=e.ast,a=e.expression,n=e.steps,r=e.previousReduction,i=e.briefHistory;if(0===n&&(t=this.parseExpression(a)),!(null===t||r instanceof m.None)){var s=new m.NormalEvaluator(t);r=s.nextReduction,s.nextReduction instanceof m.None?this.setState(Object(c.a)({},this.state,{steping:!1})):(t=s.perform(),n++,i.unshift(t.clone()),i.length=Math.min(i.length,5),this.setState(Object(c.a)({},this.state,{ast:t,steps:n,previousReduction:r,steping:!0,briefHistory:i})))}}},{key:"clear",value:function(){this.setState({steps:0,previousReduction:null,briefHistory:[],steping:!1})}},{key:"stepIn",value:function(){}},{key:"stepBack",value:function(){}},{key:"onExpressionChange",value:function(e){var t=this.state.autoCloseParenthesis,a=e.target.value,n=a.split("\n").length,r=e.target.selectionEnd;a=a.replace(/\\/g,"\u03bb"),t&&"("===a.charAt(r-1)&&(a=a.slice(0,r)+")"+a.slice(r));var i=this.parseExpression(a);this.autoSave(a),this.setState({expression:a,lines:n,ast:i,steps:0,previousReduction:null,caretPosition:r})}},{key:"autoSave",value:function(e){var t=encodeURI(e);window.location.hash=t}},{key:"parseExpression",value:function(e){try{var t=Object(m.tokenize)(e,{lambdaLetters:["\u03bb","~"],singleLetterVars:!1}),a=Object(m.parse)(t,this.state.macroTable);return console.log("successfuly parsed"),a}catch(n){return console.log("Something went wrong"),console.log(n),null}}},{key:"getExpressionFromURL",value:function(){return decodeURI(window.location.hash.substring(1))}},{key:"getMacrosFromLocalStorage",value:function(){return JSON.parse(window.localStorage.getItem("macrotable")||"{}")}},{key:"updateFromURL",value:function(){var e=this.state.expression,t=this.getExpressionFromURL(),a=t.split("\n").length;if(e!==t){var n=this.parseExpression(t);this.setState({expression:t,lines:a,ast:n,steps:0,previousReduction:null})}else console.log("ALREADY SYNCED")}},{key:"addMacro",value:function(e,t){var a=Object(c.a)({},this.state.macroTable,Object(o.a)({},e,t));this.setState(Object(c.a)({},this.state,{macroTable:a})),window.localStorage.setItem("macrotable",JSON.stringify(a))}},{key:"removeMacro",value:function(e){var t=Object(c.a)({},this.state.macroTable);delete t[e],this.setState(Object(c.a)({},this.state,{macroTable:t})),window.localStorage.setItem("macrotable",JSON.stringify(t))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.0f9ff3a4.chunk.js.map