(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(68)},34:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(26),r=a.n(s),o=(a(34),a(27)),c=a(23),l=a(3),u=a(12),d=a(11),p=a(15),h=a(14),b=a(16),m=a(1),f=a(2),v={width:"100%",fontSize:"3em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none"};function g(e){var t=e.content,a=e.lines,n=e.onChange,s=e.caretPosition;return i.a.createElement("textarea",{style:v,onChange:n,value:t,placeholder:"(\u03bb f . (\u03bb x . f (x x)) (\u03bb x . f (x x)))",wrap:"hard",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,rows:Math.max(a+1,2),ref:function(e){null!==e&&(e.selectionStart=s,e.selectionEnd=s)}})}var O={fontSize:"1.5em",background:"none",borderStyle:"none",borderBottom:"2px solid navy",marginLeft:"5px",marginRight:"5px",cursor:"pointer",outline:"none"};function y(e){var t=e.run,a=e.stop,n=e.step,s=e.clear,r=e.validate,o=(e.stepIn,e.stepBack,e.canRun),c=e.canStepOver,l=(e.canStepIn,e.canGoBack,e.running);return i.a.createElement("div",null,i.a.createElement("button",{style:O,onClick:function(){return(l?a:t)()},disabled:!o},l?"STOP":"RUN"),i.a.createElement("button",{style:O,onClick:n,disabled:!c||l},"STEP"),i.a.createElement("button",{style:O,onClick:s,disabled:l},"CLEAR"),i.a.createElement("button",{style:O,onClick:r,disabled:!1},"VALIDATE"))}var j=function(e){function t(e,a){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this))).tree=e,n.onClick=a,n.rendered=null,n.tree.visit(Object(m.a)(Object(m.a)(n))),n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"printLambdaBody",value:function(e){e.body instanceof f.Lambda?this.printLambdaBody(e.body):e.body.visit(this)}},{key:"printLambdaArguments",value:function(e,t){if(e.body instanceof f.Lambda){var a=i.a.createElement("span",{className:"arguments"},t," ",e.body.argument.name());this.printLambdaArguments(e.body,a)}else this.rendered=t}}]),Object(d.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){if(e.right instanceof f.Application){e.left.visit(this);var t=this.rendered;e.right.visit(this);var a=this.rendered;this.rendered=i.a.createElement("span",{className:"application"},t," ( ",a," )")}else{e.left.visit(this);var n=this.rendered;e.right.visit(this);var s=this.rendered;this.rendered=i.a.createElement("span",{className:"application"},n," ",s)}}},{key:"onLambda",value:function(e){var t=this;if(e.body instanceof f.Lambda){this.printLambdaArguments(e,i.a.createElement("span",{className:"arguments"},e.argument.name()));var a=this.rendered;this.printLambdaBody(e);var n=this.rendered;this.rendered=i.a.createElement("span",{className:"lambda"},"( ",i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){console.log(e),t.onClick({type:f.Beta,context:e})}},"\u03bb")," ",a," . ",n," )")}else{e.argument.visit(this);var s=this.rendered;e.body.visit(this);var r=this.rendered;this.rendered=i.a.createElement("span",{className:"lambda"},"(",i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){console.log(e),t.onClick({type:f.Beta,context:e})}},"\u03bb")," ",s," . ",r," )")}}},{key:"onChurchNumber",value:function(e){this.rendered=i.a.createElement("span",{className:"churchnumeral"},e.name())}},{key:"onMacro",value:function(e){this.rendered=i.a.createElement("span",{className:"macro"},e.name())}},{key:"onVariable",value:function(e){this.rendered=i.a.createElement("span",{className:"variable"},e.name())}}]),t}(f.ASTVisitor),E={fontSize:"2em",wordWrap:"anywhere"};function k(e){var t=e.tree,a=e.addBreakpoint;if(null===t)return null;var n=new j(t,function(e){void 0!==a&&(console.log("CLICKED"),a(e))});return i.a.createElement("span",{style:E},n.print())}var x=a(19);function S(e){return e.trim()}var C=function(){function e(t){Object(u.a)(this,e),this.roots=t,this.translator=new Map,this.equals=!0,this.context=void 0,this.context=t,this.compare()}return Object(d.a)(e,[{key:"compare",value:function(){var e=Object(x.a)(this.context,2),t=e[0],a=e[1];if(t instanceof f.Lambda&&a instanceof f.Lambda){var n=new Map(this.translator.entries());this.translator.set(t.argument.name(),a.argument.name()),this.context=[t.right,a.right],this.compare(),this.translator=n}else if(t instanceof f.Application&&a instanceof f.Application){if(this.context=[t.left,a.left],this.compare(),!this.equals)return;this.context=[t.right,a.right],this.compare()}else t instanceof f.Macro&&a instanceof f.Macro?this.equals=t.name()===a.name():t instanceof f.ChurchNumber&&a instanceof f.ChurchNumber?this.equals=t.name()===a.name():t instanceof f.Variable&&a instanceof f.Variable?this.equals=this.translator.get(t.name())===a.name():this.equals=!1}}]),e}(),w={padding:"0"},L={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingLeft:"10px",paddingRight:"10px",border:"1px solid gray",listStyle:"none",margin:"10px",borderRadius:"20px",color:"gray",cursor:"pointer"},R={fontSize:"1.2em",display:"inline-block",textAlign:"center",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"10px",paddingRight:"10px",border:"2px solid black",listStyle:"none",margin:"10px",borderRadius:"20px",color:"black",cursor:"pointer"},M={width:"100%",fontSize:"2em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none",borderBottom:"none"},B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(Object(m.a)(a))),a.listMacros=a.listMacros.bind(Object(m.a)(Object(m.a)(a))),a.onAdd=a.onAdd.bind(Object(m.a)(Object(m.a)(a))),a.isValidExpression=a.isValidExpression.bind(Object(m.a)(Object(m.a)(a))),a.state={value:"",invalidMacro:!1,builtinsExpanded:!0,macroError:null},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("span",{title:"Click for toggle display",style:{fontSize:"1.3em",cursor:"pointer"},onClick:function(t){return e.setState(Object(l.a)({},e.state,{builtinsExpanded:!e.state.builtinsExpanded}))}},"Built-in Macros:"),i.a.createElement("ul",{style:w},this.state.builtinsExpanded?Object.entries(f.builtinMacros).map(function(e){var t=Object(x.a)(e,2),a=t[0],n=t[1];return i.a.createElement("li",{title:"Built-in Macro",style:L,key:a},a," ",":= ",n)}):null),i.a.createElement("span",{style:{fontSize:"1.3em"}},"User defined Macros:"),this.listMacros(),i.a.createElement("br",null),i.a.createElement("form",{onSubmit:this.onAdd},i.a.createElement("input",{disabled:this.props.disabled,value:this.state.value,onChange:this.onChange,placeholder:"T := (\u03bb t f . t)",style:this.state.invalidMacro?Object(l.a)({},M,{borderBottom:"2px solid #EF3D59"}):M,autoFocus:!0,type:"text"})))}},{key:"onChange",value:function(e){var t=e.target.value;t=t.replace(/\\/g,"\u03bb"),this.setState(Object(l.a)({},this.state,{value:t,invalidMacro:!1}))}},{key:"onAdd",value:function(e){e.preventDefault();var t=this.state.value.split(":=").map(S),a=Object(x.a)(t,2),n=a[0],i=a[1];if(!i||!this.isValidExpression(i)||n in f.builtinMacros){var s=i?n in f.builtinMacros?"You can not redefine built-in macros.":"Invalid macro.":"Empty definition.";return this.setState(Object(l.a)({},this.state,{invalidMacro:!0,macroError:s})),void console.error(s)}this.props.addMacro(n,i),this.setState(Object(l.a)({},this.state,{value:""}))}},{key:"listMacros",value:function(){var e=this,t=this.props.macros;return i.a.createElement("ul",{style:w},Object.entries(t).map(function(t){var a=Object(x.a)(t,2),n=a[0],s=a[1];return i.a.createElement("li",{key:n,title:e.props.disabled?"You cannot remove Macro while evaluating":"Click to delete Macro",style:R,onClick:function(){return!e.props.disabled&&e.props.removeMacro(n)}},n," := ",s)}))}},{key:"isValidExpression",value:function(e){try{var t=Object(f.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:!1});return Object(f.parse)(t,this.props.macros),!0}catch(a){return!1}}}]),t}(n.Component),V={width:"100%",fontSize:"2em",border:"none",overflow:"auto",outline:"none",resize:"none",borderStyle:"none",borderBottom:"none"},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(Object(m.a)(a))),a.compare=a.compare.bind(Object(m.a)(Object(m.a)(a))),a.isValidExpression=a.isValidExpression.bind(Object(m.a)(Object(m.a)(a))),a.state={value:"",invalidExpr:!1},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.compare},i.a.createElement("input",{value:this.state.value,onChange:this.onChange,placeholder:"(\u03bb t f . t)",style:this.state.invalidExpr?Object(l.a)({},V,{borderBottom:"2px solid #EF3D59"}):V,autoFocus:!0,type:"text"}))}},{key:"onChange",value:function(e){var t=e.target.value;t=t.replace(/\\/g,"\u03bb"),this.setState(Object(l.a)({},this.state,{value:t,invalidExpr:!1}))}},{key:"compare",value:function(e){e.preventDefault();var t=this.state.value.trim();t&&this.isValidExpression(t)?(this.props.onComparison(t),this.setState(Object(l.a)({},this.state,{value:""}))):this.setState(Object(l.a)({},this.state,{invalidExpr:!0}))}},{key:"isValidExpression",value:function(e){try{var t=Object(f.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:!1});return Object(f.parse)(t,{}),!0}catch(a){return!1}}}]),t}(n.Component),I={margin:"auto",marginTop:"5vh",width:"80%",borderBottom:"2px solid gray",padding:"10px"},A={margin:"auto",width:"80%",marginTop:"2vh"},T={position:"absolute",top:"0",width:"100%",borderBottom:"2px solid gray",backgroundColor:"white"},z={margin:"10px"},F={border:"none",background:"transparent",fontSize:"1.5em",cursor:"pointer"},U={padding:"0"},H={listStyle:"none",marginBottom:"20px"},P=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).run=a.run.bind(Object(m.a)(Object(m.a)(a))),a.step=a.step.bind(Object(m.a)(Object(m.a)(a))),a.stepIn=a.stepIn.bind(Object(m.a)(Object(m.a)(a))),a.stepBack=a.stepBack.bind(Object(m.a)(Object(m.a)(a))),a.parseExpression=a.parseExpression.bind(Object(m.a)(Object(m.a)(a))),a.onExpressionChange=a.onExpressionChange.bind(Object(m.a)(Object(m.a)(a))),a.autoSave=function(e,t){var a;return function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];window.clearTimeout(a),a=window.setTimeout(function(){e.apply(void 0,i)},t)}}(a.autoSave.bind(Object(m.a)(Object(m.a)(a))),500),a.getExpressionFromURL=a.getExpressionFromURL.bind(Object(m.a)(Object(m.a)(a))),a.updateFromURL=a.updateFromURL.bind(Object(m.a)(Object(m.a)(a))),a.addMacro=a.addMacro.bind(Object(m.a)(Object(m.a)(a))),a.removeMacro=a.removeMacro.bind(Object(m.a)(Object(m.a)(a))),a.getMacrosFromLocalStorage=a.getMacrosFromLocalStorage.bind(Object(m.a)(Object(m.a)(a))),a.clear=a.clear.bind(Object(m.a)(Object(m.a)(a))),a.validate=a.validate.bind(Object(m.a)(Object(m.a)(a))),a.onComparison=a.onComparison.bind(Object(m.a)(Object(m.a)(a))),a.__run=a.__run.bind(Object(m.a)(Object(m.a)(a))),a.stop=a.stop.bind(Object(m.a)(Object(m.a)(a))),a.addBreakpoint=a.addBreakpoint.bind(Object(m.a)(Object(m.a)(a))),a.shouldBreak=a.shouldBreak.bind(Object(m.a)(Object(m.a)(a))),window.addEventListener("hashchange",a.updateFromURL);var n=a.getExpressionFromURL(),i=n.split("\n").length;return a.state={expression:n,lines:i,caretPosition:n.length,ast:null,steps:0,previousReduction:null,autoCloseParenthesis:!1,macroTable:a.getMacrosFromLocalStorage(),menuOpen:!1,steping:!1,briefHistory:[],isValidating:!1,running:!1,singleLetterVars:!1,breakpoints:[]},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(l.a)({},this.state,{ast:this.parseExpression(this.state.expression)}))}},{key:"render",value:function(){var e=this,t={run:this.run,stop:this.stop,step:this.step,clear:this.clear,validate:this.validate,stepIn:this.stepIn,stepBack:this.stepBack,canRun:!0,canStepOver:!0,canStepIn:!0,canGoBack:!0,running:this.state.running},a=this.state,n=(a.ast,a.steps),s=a.expression,r=a.lines,o=a.caretPosition;return i.a.createElement("div",{className:"App"},this.state.menuOpen?i.a.createElement("div",{style:T},i.a.createElement("button",{title:"Close Menu",style:F,onClick:function(){e.setState(Object(l.a)({},e.state,{menuOpen:!1}))}},")("),i.a.createElement("div",{style:z},i.a.createElement("span",{style:{fontSize:"1.3em"}},"Autocomplete parethesis"),i.a.createElement("input",{type:"checkbox",checked:this.state.autoCloseParenthesis,onChange:function(t){return e.setState(Object(l.a)({},e.state,{autoCloseParenthesis:!e.state.autoCloseParenthesis}))}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{style:{fontSize:"1.3em"},title:"Write identifiers without spaces"},"Single letter Identifiers"),i.a.createElement("input",{type:"checkbox",checked:this.state.singleLetterVars,onChange:function(t){return e.setState(Object(l.a)({},e.state,{singleLetterVars:!e.state.singleLetterVars}))}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(B,{disabled:this.state.steping,macros:this.state.macroTable,addMacro:this.addMacro,removeMacro:this.removeMacro}))):i.a.createElement("button",{title:"Open Menu",style:F,onClick:function(){e.setState(Object(l.a)({},e.state,{menuOpen:!0}))}},"()"),i.a.createElement("div",{style:I},i.a.createElement(g,{content:s,lines:r,caretPosition:o,onChange:this.onExpressionChange}),i.a.createElement("br",null),i.a.createElement(y,t),i.a.createElement("br",null),"Steps: ",n,i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{style:A},this.state.isValidating?i.a.createElement(N,{onComparison:this.onComparison}):null,i.a.createElement("ul",{style:U},this.state.briefHistory.map(function(t,a){return i.a.createElement("li",{key:a,style:0!==a?Object(l.a)({},H,{color:"gray"}):H},0===a?i.a.createElement(k,{addBreakpoint:e.addBreakpoint,tree:t}):i.a.createElement(k,{tree:t}))}))))}},{key:"shouldBreak",value:function(e,t){return t instanceof e.type&&t instanceof f.Beta&&e.context instanceof f.Lambda&&t.target.identifier===e.context.body.identifier}},{key:"__run",value:function(){var e=this,t=this.state,a=t.ast,n=t.expression,i=t.steps,s=t.previousReduction,r=t.briefHistory,o=t.running,c=t.breakpoints;if(o&&(0===i&&(a=this.parseExpression(n)),!(null===a||s instanceof f.None))){var u=new f.NormalEvaluator(a);if(s=u.nextReduction,u.nextReduction instanceof f.None)return r=[a.clone()],void this.setState(Object(l.a)({},this.state,{ast:a,steps:i,previousReduction:s,steping:!1,briefHistory:r,isValidating:!1,running:!1}));var d=0;if(void 0!==c.find(function(t,a){return d=a,e.shouldBreak(t,u.nextReduction)}))return c.splice(d,1),void this.setState(Object(l.a)({},this.state,{running:!1,steping:!1,breakpoints:c}));a=u.perform(),i++,this.setState(Object(l.a)({},this.state,{ast:a,steps:i,previousReduction:s,briefHistory:[a],isValidating:!1})),window.setTimeout(this.__run,3e3)}}},{key:"run",value:function(){var e=this;this.state.previousReduction instanceof f.None||this.setState(Object(l.a)({},this.state,{running:!0,steping:!0}),function(){return window.setTimeout(e.__run,3e3)})}},{key:"stop",value:function(){this.setState(Object(l.a)({},this.state,{running:!1}))}},{key:"step",value:function(){var e=this.state,t=e.ast,a=e.expression,n=e.steps,i=e.previousReduction,s=e.briefHistory;if(0===n&&(t=this.parseExpression(a)),!(null===t||i instanceof f.None)){var r=new f.NormalEvaluator(t);i=r.nextReduction,r.nextReduction instanceof f.None?this.setState(Object(l.a)({},this.state,{steping:!1,previousReduction:i})):(t=r.perform(),n++,s.unshift(t.clone()),s.length=Math.min(s.length,5),this.setState(Object(l.a)({},this.state,{ast:t,steps:n,previousReduction:i,steping:!0,briefHistory:s,isValidating:!1})))}}},{key:"clear",value:function(){this.setState({steps:0,previousReduction:null,briefHistory:[],steping:!1,isValidating:!1,breakpoints:[]})}},{key:"validate",value:function(){this.state.previousReduction instanceof f.None||this.setState(Object(l.a)({},this.state,{isValidating:!0}))}},{key:"onComparison",value:function(e){var t=this.state,a=t.ast,n=t.expression,i=t.steps,s=t.previousReduction,r=t.briefHistory;if(0===i&&(a=this.parseExpression(n)),null===a||s instanceof f.None)this.setState(Object(l.a)({},this.state,{ast:a,isValidating:!1}));else{var o=new f.NormalEvaluator(a);if(s=o.nextReduction,o.nextReduction instanceof f.None)this.setState(Object(l.a)({},this.state,{steping:!1,isValidating:!1}));else{a=o.perform(),i++;var c=this.parseExpression(e);if(null===c)return console.error("User Input is INVALID \u03bb expression."),void this.setState(Object(l.a)({},this.state,{ast:a,isValidating:!1}));new C([a,c]).equals?(console.log("User Input is CORRECT."),r.unshift(c.clone()),r.length=Math.min(r.length,5),this.setState(Object(l.a)({},this.state,{ast:c,steps:i,previousReduction:s,briefHistory:r,isValidating:!1}))):(console.error("User Input is INCCORECT."),r.unshift(a.clone()),r.length=Math.min(r.length,5),this.setState(Object(l.a)({},this.state,{ast:a,steps:i,previousReduction:s,briefHistory:r,isValidating:!1})))}}}},{key:"stepIn",value:function(){}},{key:"stepBack",value:function(){}},{key:"onExpressionChange",value:function(e){var t=this.state.autoCloseParenthesis,a=e.target.value,n=a.split("\n").length,i=e.target.selectionEnd;a=a.replace(/\\/g,"\u03bb"),t&&"("===a.charAt(i-1)&&(a=a.slice(0,i)+")"+a.slice(i));var s=this.parseExpression(a);this.autoSave(a),this.setState({expression:a,lines:n,ast:s,briefHistory:[],steps:0,previousReduction:null,caretPosition:i,isValidating:!1,breakpoints:[]})}},{key:"autoSave",value:function(e){var t=encodeURI(e);window.location.hash=t}},{key:"parseExpression",value:function(e){var t=this.state.singleLetterVars;try{var a=Object(f.tokenize)(e,{lambdaLetters:["\u03bb","~"],singleLetterVars:t}),n=Object(f.parse)(a,this.state.macroTable);return console.log("successfuly parsed"),n}catch(i){return console.log("Something went wrong"),console.error(i),null}}},{key:"getExpressionFromURL",value:function(){return decodeURI(window.location.hash.substring(1))}},{key:"getMacrosFromLocalStorage",value:function(){var e=JSON.parse(window.localStorage.getItem("macrotable")||"{}");return Object(l.a)({},{fact:"(Y (\u03bb f n . (<= n 1) 1 (* n (f (- n 1)))))",facct:"(\u03bb n . (Y (\u03bb f n a . IF (= n 1) a (f (- n 1) (* n a)))) (- n 1) (n))",fib:"(Y (\u03bb f n . (= n 0) 0 ((= n 1) 1 ( + (f (- n 1)) (f (- n 2))))))",inflist:"(\u03bb n . (Y (\u03bb x . (\u03bb f s g . g f s) n x)))"},e)}},{key:"updateFromURL",value:function(){var e=this.state.expression,t=this.getExpressionFromURL(),a=t.split("\n").length;if(e!==t){var n=this.parseExpression(t);this.setState({expression:t,lines:a,ast:n,steps:0,previousReduction:null})}else console.log("ALREADY SYNCED")}},{key:"addMacro",value:function(e,t){var a=Object(l.a)({},this.state.macroTable,Object(c.a)({},e,t));this.setState(Object(l.a)({},this.state,{macroTable:a})),window.localStorage.setItem("macrotable",JSON.stringify(a))}},{key:"removeMacro",value:function(e){var t=Object(l.a)({},this.state.macroTable);delete t[e],this.setState(Object(l.a)({},this.state,{macroTable:t})),window.localStorage.setItem("macrotable",JSON.stringify(t))}},{key:"addBreakpoint",value:function(e){this.setState(Object(l.a)({},this.state,{breakpoints:[].concat(Object(o.a)(this.state.breakpoints),[e])}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.97df4a0d.chunk.js.map